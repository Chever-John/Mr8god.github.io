<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Mr8god&#39;s blog</title>
  
  <subtitle>coding,coding,always coding!</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://mr8god.cn/"/>
  <updated>2020-05-11T00:19:39.919Z</updated>
  <id>https://mr8god.cn/</id>
  
  <author>
    <name>Mr8god</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Maven</title>
    <link href="https://mr8god.cn/2020/05/07/Maven/"/>
    <id>https://mr8god.cn/2020/05/07/Maven/</id>
    <published>2020-05-07T01:47:38.000Z</published>
    <updated>2020-05-11T00:19:39.919Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Maven"><a href="#Maven" class="headerlink" title="Maven"></a>Maven</h1><p>​        <strong>Maven</strong>项目对象模型（POM）， 可以通过一小段描述信息来管理项目的构建、报告和文档的项目管理工具软件。<br>​        <strong>Maven</strong>除了以程序构建能力为特色之外，还提供高级项目管理工具。由于<strong>Maven</strong>的缺省构建规则有较高的可重用性能，所以常常用两三行<strong>Maven</strong>构建脚本就可以构建简单的项目。由于<strong>Maven</strong>的面向项目的属性，很多项目发布时都会使用<strong>Maven</strong>，所以目前使用<strong>Maven</strong>技术的比例在持续增长。<br>​        总而言之，<strong>Maven</strong>是一个可以用来构建和管理任何基于Java的项目的工具，主要目标是让开发人员在最短的时间内了解开发工作的完整状态。</p><p>emmmm</p><h2 id="Maven的优点如下"><a href="#Maven的优点如下" class="headerlink" title="Maven的优点如下"></a><strong>Maven</strong>的优点如下</h2><blockquote><p>简化构建过程<br>提供统一的构建系统<br>提供优质的项目信息<br>提供最佳实践开发指南<br>允许透明迁移新功能</p></blockquote><h3 id="简化构建过程"><a href="#简化构建过程" class="headerlink" title="简化构建过程"></a>简化构建过程</h3><p>虽然使用<strong>Maven</strong>时偶尔也需要你对底层细节有所了解！但是，<strong>Maven</strong> 确实屏蔽了很多细节，它已经大大简化了开发人员的工作。</p><h3 id="提供统一的构建系统"><a href="#提供统一的构建系统" class="headerlink" title="提供统一的构建系统"></a>提供统一的构建系统</h3><p><strong>Maven</strong> 使用项目对象模型（<strong>POM</strong>）和一组所有项目共享的插件来构建项目，从而提供统一的构建系统。开发人员使用 <strong>Maven</strong> 构建项目的话，后期维护项目会节省大量时间。</p><h3 id="提供优质的项目信息"><a href="#提供优质的项目信息" class="headerlink" title="提供优质的项目信息"></a>提供优质的项目信息</h3><p><strong>Maven</strong> 提供了大量有用的项目信息，这些信息部分来自您的<strong>POM</strong>，部分来自项目源。例如，<strong>Maven</strong>可以提供：</p><blockquote><p>更改从源代码控制直接创建的日志文档<br>交叉引用的来源<br>邮件列表<br>依赖列表<br>单元测试报告包括报道</p></blockquote><p>由于 <strong>Maven</strong> 改进了提供的信息，所有这些信息对 <strong>Maven</strong> 用户都是透明的。<br>通过 <strong>Maven</strong> 插件，其他产品可以将自己的项目信息兼容 <strong>Maven</strong> 的标准信息，所有信息同样基于<strong>POM</strong>。</p><h3 id="提供最佳实践开发指南"><a href="#提供最佳实践开发指南" class="headerlink" title="提供最佳实践开发指南"></a>提供最佳实践开发指南</h3><p><strong>Maven</strong> 会汇总当前最佳开发实践的原则，并通过 <strong>Maven</strong> 影响其他项目。</p><p>例如，<strong>Maven</strong> 的正常构建周期中的单元测试的规范，执行和报告。</p><p>当前的单元测试最佳实践被用作指导原则：</p><blockquote><p>将测试源代码保存在独立的、并行的源代码树中；</p><p>规范测试用例命名，便于来定位和执行测试；</p><p>为测试用例设置的环境，不依赖与客户化的定制构建和测试准备。</p></blockquote><p><strong>Maven</strong>还旨在工作流程中协助项目开发，如发布管理和问题跟踪。</p><h3 id="允许透明迁移到新功能"><a href="#允许透明迁移到新功能" class="headerlink" title="允许透明迁移到新功能"></a>允许透明迁移到新功能</h3><p>Maven 为 Maven 客户端提供了一种安装更新的简单方法，开发人员可以简单便捷的利用 Maven 的最新特性。</p><p>从第三方或 Maven 安装新的插件变得非常的简单。</p><h2 id="在Java中Maven项目跟Web项目的区别（distinction）"><a href="#在Java中Maven项目跟Web项目的区别（distinction）" class="headerlink" title="在Java中Maven项目跟Web项目的区别（distinction）"></a>在Java中Maven项目跟Web项目的区别（distinction）</h2><h3 id="定义不同："><a href="#定义不同：" class="headerlink" title="定义不同："></a>定义不同：</h3><p><strong>Web</strong>项目是网页的编码，像</p><p><strong>jsp</strong>(<a href="https://baike.baidu.com/item/JSP/141543" target="_blank" rel="noopener">https://baike.baidu.com/item/JSP/141543</a>)<br><strong>servlet</strong>(<a href="https://baike.baidu.com/item/servlet" target="_blank" rel="noopener">https://baike.baidu.com/item/servlet</a>)<br><strong>struts</strong>(<a href="https://baike.baidu.com/item/struts" target="_blank" rel="noopener">https://baike.baidu.com/item/struts</a>)</p><p><strong>Java Maven</strong>项目是<br><strong>AWT</strong>(<a href="https://baike.baidu.com/item/AWT)、**SWING**(https://baike.baidu.com/item/Swing/3286527" target="_blank" rel="noopener">https://baike.baidu.com/item/AWT)、**SWING**(https://baike.baidu.com/item/Swing/3286527</a>)<br>这类的编码</p><h4 id="举例说明："><a href="#举例说明：" class="headerlink" title="举例说明："></a>举例说明：</h4><p>Java不仅是一门编程语言，还是一个平台，通过JRuby和Jython，我们可以在<a href="https://www.baidu.com/s?wd=Java平台&amp;tn=SE_PcZhidaonwhc_ngpagmjz&amp;rsv_dl=gh_pc_zhidao" target="_blank" rel="noopener">Java平台</a>上编写和运行Ruby和Python程序；</p><p>Maven不仅是构建工具，还是一个依赖管理工具和项目信息管理工具；</p><p>web项目是网页的编码项目，需要在服务器上运行。</p><h3 id="作用不同："><a href="#作用不同：" class="headerlink" title="作用不同："></a>作用不同：</h3><p><strong>Java</strong>可以用来编写桌面应用程序、Web应用程序、分布式系统和嵌入式系统应用程序等 ；</p><p><strong>Maven</strong>由项目对象模型、标准集合、项目生命周期和依赖关系管理系统构成，可以经过项目对象模型描述信息来管理项目的构建、报告和文档，还可以生成站点和管理JAR文件；</p><p><strong>web</strong>是建立在Internet上的一种网络服务，包含了超文本、超媒体和超文本传输协议，可以提供图形化的直观的网页浏览界面，信息可以实时更新。</p><h3 id="特点不同"><a href="#特点不同" class="headerlink" title="特点不同"></a>特点不同</h3><p><strong>Java</strong>是一门面向对象编程语言，<strong>Java</strong>具有简单性、面向对象、分布式、健壮性、安全性、平台独立与可移植性、多线程、动态性等特点。</p><p><strong>Maven</strong> 有一个生命周期，当你运行 <strong>mvn install</strong> 的时候被调用，这条命令告诉 <strong>Maven</strong> 执行一系列的有序的步骤，直到到达你指定的生命周期。遍历生命周期旅途中的一个影响就是，<strong>Maven</strong> 运行了许多默认的插件目标，这些目标完成了像编译和创建一个 JAR 文件这样的工作。</p><p><strong>web</strong>即全球广域网，也称为万维网，它是一种基于超文本和<strong>HTTP</strong>的、全球性的、动态交互的、跨平台的分布式图形信息系统。是建立在<strong>Internet</strong>上的一种网络服务，为浏览者在<strong>Internet</strong>上查找和浏览信息提供了图形化的、易于访问的直观界面。</p><h2 id="Maven常用命令"><a href="#Maven常用命令" class="headerlink" title="Maven常用命令"></a>Maven常用命令</h2><p>mvn archetype:generate 创建Maven项目</p><p>mvn compile 编译源代码</p><p>mvn deploy 发布项目</p><p>mvn test-compile 编译测试源代码</p><p>mvn test 运行应用程序中的单元测试</p><p>mvn site 生成项目相关信息的网站</p><p>mvn clean 清除项目目录中的生成结果</p><p>mvn package 根据项目生成的jar</p><p>mvn install 在本地Repository中安装jar</p><p>mvn eclipse:eclipse 生成eclipse项目文件</p><p>mvnjetty:run 启动jetty服务</p><p>mvntomcat:run 启动tomcat服务</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Maven&quot;&gt;&lt;a href=&quot;#Maven&quot; class=&quot;headerlink&quot; title=&quot;Maven&quot;&gt;&lt;/a&gt;Maven&lt;/h1&gt;&lt;p&gt;​        &lt;strong&gt;Maven&lt;/strong&gt;项目对象模型（POM）， 可以通过一小段描述信息来管理
      
    
    </summary>
    
    
      <category term="技术" scheme="https://mr8god.cn/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="项目开发" scheme="https://mr8god.cn/tags/%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>基于Springboot的个人博客网站开发</title>
    <link href="https://mr8god.cn/2020/05/04/%E5%9F%BA%E4%BA%8ESpringboot%E7%9A%84%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99%E5%BC%80%E5%8F%91/"/>
    <id>https://mr8god.cn/2020/05/04/%E5%9F%BA%E4%BA%8ESpringboot%E7%9A%84%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%BD%91%E7%AB%99%E5%BC%80%E5%8F%91/</id>
    <published>2020-05-04T15:52:06.000Z</published>
    <updated>2020-05-05T01:56:24.965Z</updated>
    
    <content type="html"><![CDATA[<h1 id="基于Spring-Boot的个人博客"><a href="#基于Spring-Boot的个人博客" class="headerlink" title="基于Spring Boot的个人博客"></a>基于Spring Boot的个人博客</h1><h3 id="涉及技术及工具"><a href="#涉及技术及工具" class="headerlink" title="涉及技术及工具"></a>涉及技术及工具</h3><ul><li>核心框架：SpringBoot</li><li>ORM框架：MyBatis</li><li>MyBatis工具：MyBatis Mapper</li><li>MVC框架：Spring MVC</li><li>模板引擎：Freemarker</li><li>编译辅助插件：Lombok</li><li>CSS框架：BootStrap4.0</li><li>数据库：MySQL</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;基于Spring-Boot的个人博客&quot;&gt;&lt;a href=&quot;#基于Spring-Boot的个人博客&quot; class=&quot;headerlink&quot; title=&quot;基于Spring Boot的个人博客&quot;&gt;&lt;/a&gt;基于Spring Boot的个人博客&lt;/h1&gt;&lt;h3 id=&quot;涉
      
    
    </summary>
    
    
      <category term="技术" scheme="https://mr8god.cn/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="Java" scheme="https://mr8god.cn/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>观《大国手之才子佳人》有感</title>
    <link href="https://mr8god.cn/2020/05/03/%E5%BD%B1%E8%AF%84/%E8%A7%82%E3%80%8A%E5%A4%A7%E5%9B%BD%E6%89%8B%E4%B9%8B%E6%89%8D%E5%AD%90%E4%BD%B3%E4%BA%BA%E3%80%8B%E6%9C%89%E6%84%9F/"/>
    <id>https://mr8god.cn/2020/05/03/%E5%BD%B1%E8%AF%84/%E8%A7%82%E3%80%8A%E5%A4%A7%E5%9B%BD%E6%89%8B%E4%B9%8B%E6%89%8D%E5%AD%90%E4%BD%B3%E4%BA%BA%E3%80%8B%E6%9C%89%E6%84%9F/</id>
    <published>2020-05-03T14:19:35.000Z</published>
    <updated>2020-05-03T15:14:13.178Z</updated>
    
    <content type="html"><![CDATA[<h1 id="观《大国手之才子佳人》有感"><a href="#观《大国手之才子佳人》有感" class="headerlink" title="观《大国手之才子佳人》有感"></a>观《大国手之才子佳人》有感</h1><p>才子佳人才子佳人，应该有才子也有佳人，这里边的才子毫无疑问，必是我们的范西屏老哥了。佳人的话，先前可能是席佩兰，最后可能就是阿娇了。害，可惜是世事无常，造化弄人。</p><p><img src="https://i.loli.net/2020/05/03/EGBD12AfUtmTiIV.jpg" alt="大国手之才子佳人"></p><h2 id="内容简介"><a href="#内容简介" class="headerlink" title="内容简介"></a>内容简介</h2><p>​        <a href="https://baike.baidu.com/item/范西屏" target="_blank" rel="noopener">范西屏</a>参加<a href="https://baike.baidu.com/item/袁枚" target="_blank" rel="noopener">袁枚</a>举办的随园诗会,看到袁枚轻松挣到大把的银子，非常惊诧。袁枚乘热打铁，开导他，如何把才艺转化为财富。袁枚为把范西屏打造成“棋圣”，派他的首席女弟子<a href="https://baike.baidu.com/item/席佩兰" target="_blank" rel="noopener">席佩兰</a>培训范西屏。她的才艺打动了范西屏。为讨席佩兰喜欢，他拼命学习诗文。范西屏戴着棋圣的光环与出钱的富商对局，挣的盆满钵满。但他对此不屑。只想追求席佩兰。<br>​        不料，席佩兰嫁人。他大病一场。他开始厌恶这一场场的“游戏”。一富商出巨资，买一盘赢他的棋。富商在赛场上的寡廉鲜耻。让他忍无可忍，痛宰富商，挽回荣誉。他从“钱”眼里跳出来后，去追求敢说敢恨的<a href="https://baike.baidu.com/item/阿娇" target="_blank" rel="noopener">阿娇</a>，不想阿娇是袁枚的妾，又一次让他失落。带着遗憾，他离开袁枚的豪宅，回归到自由自在的生活中。</p><h2 id="个人的几处小见解"><a href="#个人的几处小见解" class="headerlink" title="个人的几处小见解"></a>个人的几处小见解</h2><h3 id="袁枚的“不为五斗米折腰，站起身来，挣他个十斗米”"><a href="#袁枚的“不为五斗米折腰，站起身来，挣他个十斗米”" class="headerlink" title="袁枚的“不为五斗米折腰，站起身来，挣他个十斗米”"></a>袁枚的“不为五斗米折腰，站起身来，挣他个十斗米”</h3><p>我是第一次知道袁枚同学居然这么有钱，原来袁枚还是个擅于经营的行家。他的理想是:读书人往往只有两条路，要么是升官发财，要么是穷困潦倒，只能靠卖字教书为生。不得不说袁枚是真的有智慧噻。咳咳，这不是重点。我是想说我从他身上得到的关于做人的人生道理。</p><p>话说我今后到底要不要赚大钱，然后俯首于其他人呢？我想先说一个我今天在b站上看到的东西：学生思维。这是一种一直怀揣正义，非正即恶的思维，由于大概率在学生身上出现，所以叫做学生思维。其实我们往往可以在自己的原则上，再做一些妥协，嗯嗯，这将是我最近一段时间的准则</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;观《大国手之才子佳人》有感&quot;&gt;&lt;a href=&quot;#观《大国手之才子佳人》有感&quot; class=&quot;headerlink&quot; title=&quot;观《大国手之才子佳人》有感&quot;&gt;&lt;/a&gt;观《大国手之才子佳人》有感&lt;/h1&gt;&lt;p&gt;才子佳人才子佳人，应该有才子也有佳人，这里边的才子毫
      
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>观《大国手之扬州论枰》有感</title>
    <link href="https://mr8god.cn/2020/05/01/%E5%BD%B1%E8%AF%84/%E8%A7%82%E3%80%8A%E5%A4%A7%E5%9B%BD%E6%89%8B%E4%B9%8B%E6%89%AC%E5%B7%9E%E8%AE%BA%E6%9E%B0%E3%80%8B%E6%9C%89%E6%84%9F/"/>
    <id>https://mr8god.cn/2020/05/01/%E5%BD%B1%E8%AF%84/%E8%A7%82%E3%80%8A%E5%A4%A7%E5%9B%BD%E6%89%8B%E4%B9%8B%E6%89%AC%E5%B7%9E%E8%AE%BA%E6%9E%B0%E3%80%8B%E6%9C%89%E6%84%9F/</id>
    <published>2020-05-01T15:59:01.000Z</published>
    <updated>2020-05-02T15:31:42.800Z</updated>
    
    <content type="html"><![CDATA[<h1 id="观《大国手之扬州论枰》有感"><a href="#观《大国手之扬州论枰》有感" class="headerlink" title="观《大国手之扬州论枰》有感"></a>观《大国手之扬州论枰》有感</h1><p>今天是五月二日，小长假的第二天，我看了扬州论枰这部电影。挺好的哈，就是感想不是特别多。</p><p><img src="https://i.loli.net/2020/05/02/Viq6hQMAcIdbf4n.jpg" alt="大国手之扬州论枰"></p><h2 id="内容简介"><a href="#内容简介" class="headerlink" title="内容简介"></a>内容简介</h2><p>​        来自百度百科：天下围棋高手汇聚扬州，争夺“天下第一大国手”之美誉。<a href="https://baike.baidu.com/item/范西屏" target="_blank" rel="noopener">范西屏</a>应邀参加。<a href="https://baike.baidu.com/item/施襄夏" target="_blank" rel="noopener">施襄夏</a>前来助战。路上，施襄夏听说窦明政因揭发江苏粮库亏空案，遭人暗算，危在旦夕。他拜见窦明政，了解详情，亲眼见他被抓进大牢。乾隆也到扬州，暗查此案。被调查的官员层层庇护，极力隐瞒真相。为收集证据，施襄夏出美人计，收集官府的票据。被贪官们察觉，盗走了证据。 乾隆关注着这场棋赛，还要和胜者对局。范西屏和施襄夏决心打败所有对手，面见皇上。道出实情。在施襄夏的助战下，范西屏战胜各路高手，并再次收集到重要证据。范西屏赢得大国手称号，在同乾隆的对局中，俩人珠联璧合，利用棋子的布局，让乾隆看到事情真相。彻底揭开黑幕。使贪官受到惩罚，冤案得以昭雪 。</p><h2 id="个人的基础小见解"><a href="#个人的基础小见解" class="headerlink" title="个人的基础小见解"></a>个人的基础小见解</h2><p>​        对于这部电影，我没啥看法，没有特别好的想法，over</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;观《大国手之扬州论枰》有感&quot;&gt;&lt;a href=&quot;#观《大国手之扬州论枰》有感&quot; class=&quot;headerlink&quot; title=&quot;观《大国手之扬州论枰》有感&quot;&gt;&lt;/a&gt;观《大国手之扬州论枰》有感&lt;/h1&gt;&lt;p&gt;今天是五月二日，小长假的第二天，我看了扬州论枰这部电
      
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>观《大国手之秦淮风月》有感</title>
    <link href="https://mr8god.cn/2020/05/01/%E5%BD%B1%E8%AF%84/%E8%A7%82%E3%80%8A%E5%A4%A7%E5%9B%BD%E6%89%8B%E4%B9%8B%E7%A7%A6%E6%B7%AE%E9%A3%8E%E6%9C%88%E3%80%8B%E6%9C%89%E6%84%9F/"/>
    <id>https://mr8god.cn/2020/05/01/%E5%BD%B1%E8%AF%84/%E8%A7%82%E3%80%8A%E5%A4%A7%E5%9B%BD%E6%89%8B%E4%B9%8B%E7%A7%A6%E6%B7%AE%E9%A3%8E%E6%9C%88%E3%80%8B%E6%9C%89%E6%84%9F/</id>
    <published>2020-05-01T15:59:01.000Z</published>
    <updated>2020-05-02T15:36:34.869Z</updated>
    
    <content type="html"><![CDATA[<h1 id="观《大国手之秦淮风月》有感"><a href="#观《大国手之秦淮风月》有感" class="headerlink" title="观《大国手之秦淮风月》有感"></a>观《大国手之秦淮风月》有感</h1><p>突然想起来了我小时在CCTV6里看到的一部关于围棋的电影，然后兴致起来了，我就去查了一下，找到了这部很经典的小时候看的电影——大国手系列电影，接下来我讲一下我在2020/5/1这一天看的这第五部——《大国手之秦淮风月》</p><p><img src="https://i.loli.net/2020/05/02/M64kVZdimzBWSun.jpg" alt="大国手之秦淮风月"></p><h2 id="内容简介"><a href="#内容简介" class="headerlink" title="内容简介"></a>内容简介</h2><p>​        本片的开始，是咱们的主角——范西屏，和文学大家袁枚在秦淮河上摆宴席，好不快活。突然，画面一转，出现了一位女子，就是本电影的女主角顾静柳登场了。英雄难过美人关这一句俗语从古至今看来，都是通用的。范西屏于是开始使小计谋啦，不得不说，这一点我佩服，说动手就动手。<br>​        第二部分，为追求顾静柳，范西屏扮作落魄穷书生，用计见到顾静柳，拿出死活题，欲擒故纵，吊足顾静柳下棋的胃口。在其中范西屏被顾静柳的</p><blockquote><p>“洗尽铅华，找个依山傍水的地方，十亩田地，几间茅屋，丈夫老实本分儿女活泼可爱，男耕女织，与世无争，做个贤妻良母”</p></blockquote><p>的 美好想法给打动了，于是，范西屏就认真了。范西屏与顾静柳赌棋，要俩人以身相压。顾静柳欣然答应。</p><p>​        第三部分，范西屏假借天意，赢了第一局。当顾静柳得知对手是范西屏，后悔已来不急。她想出妙招，逼范西屏让她四子，并请出威震江南的高手与他对局。让他输了第二局，形势对范西屏陡然不利。关键局，范西屏先诈败，利用俩位高手的大意，下出很难见到的“盘龙眼”棋局。令所有的人大跌眼镜。封盘后。范西屏神秘消失一夜。第二天，必赢的棋，却出人意料地下成和棋，众人大惑不解。大家推测是范西屏故意让棋，但他不置可否，至今还是个谜。</p><h2 id="个人的几处小见解"><a href="#个人的几处小见解" class="headerlink" title="个人的几处小见解"></a>个人的几处小见解</h2><h3 id="秦淮河初见"><a href="#秦淮河初见" class="headerlink" title="秦淮河初见"></a>秦淮河初见</h3><p>​        讲真，还是挺有魅惑力的，不然顾静柳怎会拿到花魁的名称。说实话，英雄难过美人关，确实自古就存在，我不谈其他，我江某人也有一套自己的审美，有时候确实是按照外貌来办事的，这是我讲真的。我自己还总控制不住。我举个栗子，加入有两个一样的学妹来找我学习技术，一个符合我的审美，另一个反之。那么我确实会在指导的时候，真的对前者有偏心，会花时间去传授我的知识。当然不是说我不教后者了，后者想要在我这里学到和前者一样多的知识，需要她做到真·不耻下问。<br>​        害，没得办法呀。如果有对我表露心迹的小姐姐，我也会直接告诉她我的感觉，害，所以我不就单到现在了嘛。</p><h3 id="顾静柳的“美好生活”"><a href="#顾静柳的“美好生活”" class="headerlink" title="顾静柳的“美好生活”"></a>顾静柳的“美好生活”</h3><blockquote><p>“洗尽铅华，找个依山傍水的地方，十亩田地，几间茅屋，丈夫老实本分儿女活泼可爱，男耕女织，与世无争，做个贤妻良母”</p></blockquote><p>​         想得真的挺美，跟我想到一块去了，可是呢？现实可不是这么友好哦，今天还看到一个朋友发了条“男孩子很现实”的说说。讲了男孩子就因为一点点操作就做出令她不开心的事——直接不理ta了。emmmm，我看到了我自己。<br>​        我对待我初恋的态度就是这样的，当初直接就删了（好像不是我删的）反正直接就完犊子了。跟高中某个心仪小姐姐表露心迹失败后，我也是一删了之，快速度过糟糕的时光。现在我觉得就有点幼稚了。对，我认为这种想法很幼稚。我想当时的范西屏跟当初的我一样，很幼稚，就扑风捉影到一点踪迹（这里的踪迹也可指当初对心仪小姐姐的喜爱之情），然后就心荡神怡了，害。<br>​        我比较赞同之后的袁枚和范西屏说的话，他说，风月场上人的话，是不可以相信的。确实不该相信呢。从袁枚这边知道了顾静柳并非完璧之身，因为常在河边走哪有不湿鞋嘛（这个话题我下面再议）。而且顾静柳做这些事情就是为了增加自己的身价，然后加入豪门。我不对这种行为作评价，我也能理解顾静柳的想法，毕竟谁不想让自己的物质生活过得更好一些呢？<br>​        最后的最后，范西屏一定要早点醒悟呀！！！</p><h3 id="常在河边走哪有不湿鞋"><a href="#常在河边走哪有不湿鞋" class="headerlink" title="常在河边走哪有不湿鞋"></a>常在河边走哪有不湿鞋</h3><p>这个讲的就是咱顾静柳了，烟花红柳之人，当初选了这条路，就已经帮她规划了结局。<br>        顺道再引用一句</p><blockquote><p>勿以善小而不为，勿以恶小而为之</p></blockquote><h3 id="盘龙眼？和棋？"><a href="#盘龙眼？和棋？" class="headerlink" title="盘龙眼？和棋？"></a>盘龙眼？和棋？</h3><p>​        很明显，范西屏绝对让了。换我我也会让，毕竟我绝对不会取一个我喜欢她但是她不喜欢我的人，那绝对不会是真正的幸福。范西屏此时也知道了顾静柳的真实状况，知道了她其实并不如自己想象的那么好。害，我学到了，如果人不愿意，我决不强求。<br>​        我又想到了我今天在知乎上看到的一个事情：<a href="https://www.zhihu.com/answer/1151382032，我简要说一下哈，其实简要不了，建议原文。" target="_blank" rel="noopener">https://www.zhihu.com/answer/1151382032，我简要说一下哈，其实简要不了，建议原文。</a><br>​        一个重点大学研究生毕业网恋了一个专科小姐姐，据他自己讲，是被套路了，然后就在一起了。对小姐姐的形容是”身材真的好，模样真的不是我喜欢的类型“。然后再一次“意外”中，没有克制住自己。之后奉子成婚，再是对老婆各种不满，造成现在的“后悔”。<br>​        讲真，没能克制住自己这一点上，我承认我江某人如果当时遇到这种情况，也是会克制不住的，emmmmm，别问，问就是生理需求。然后我肯定也会走他的老路。<br>​        我说一下，这个事给我带来的不错的点吧</p><ol><li>我未来的wife，一定三观得合到大部分。讲真，为啥很多同学不会去和专科或者非本科同学交流呢？甚至本一都不和本二，清北不会和普通本一。不是说每一个学历等级不会出现很优秀的人，但是出现的比例确实会依次递减。就像大公司宁肯大概率录用名牌毕业生一样，谁有那个闲工夫花很多时间在找人身上，还不如找个概率大一点的群体，找到优秀的人的几率不要太大。如果三观不合的话，就肯定会有很多矛盾，而且矛盾通常还解不开，解释不同，此外学习能力和日常爱好都不一样，属实难办，那就会很糟糕。</li><li>一定要在紧要关头控制住自己，我还是觉得行房事之前首先要双方同意，而且考虑好后果了。孩子一出来就应该是两个人的事情了。当然如果双方都同意了，我觉得房事是可以在婚前做的事情，仅我个人观点。</li></ol><h3 id="暂时就这些了，一点闲聊而已"><a href="#暂时就这些了，一点闲聊而已" class="headerlink" title="暂时就这些了，一点闲聊而已"></a>暂时就这些了，一点闲聊而已</h3>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;观《大国手之秦淮风月》有感&quot;&gt;&lt;a href=&quot;#观《大国手之秦淮风月》有感&quot; class=&quot;headerlink&quot; title=&quot;观《大国手之秦淮风月》有感&quot;&gt;&lt;/a&gt;观《大国手之秦淮风月》有感&lt;/h1&gt;&lt;p&gt;突然想起来了我小时在CCTV6里看到的一部关于围棋的
      
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>Java多线程日记</title>
    <link href="https://mr8god.cn/2020/04/29/Java/Java%E6%97%A5%E8%AE%B0/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%97%A5%E8%AE%B0/"/>
    <id>https://mr8god.cn/2020/04/29/Java/Java%E6%97%A5%E8%AE%B0/Java%E5%A4%9A%E7%BA%BF%E7%A8%8B%E6%97%A5%E8%AE%B0/</id>
    <published>2020-04-29T13:18:39.000Z</published>
    <updated>2020-04-28T16:36:35.196Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Java多线程日记"><a href="#Java多线程日记" class="headerlink" title="Java多线程日记"></a>Java多线程日记</h1><p>目前应用“双十一”“12306”</p><p>三高：高可用、高性能、高并发</p><h2 id="线程简介"><a href="#线程简介" class="headerlink" title="线程简介"></a>线程简介</h2><p>现实中有很多例子，我们可以同时吃饭听歌，敲代码+听歌</p><p>但是很多看似是多任务，但是在一个时间点我们的大脑还是只做了一件事情</p><p>所以很多时候多线程是模拟的</p><p>真正的多任务是多核操作</p><h3 id="多线程"><a href="#多线程" class="headerlink" title="多线程"></a>多线程</h3><p>想象下现实中，三个电器接在同一个电线上，打开任何的电源，都能够同时亮起，同时工作 </p><p>同理，如果没有多线程的话，必须一个等一个先完成，再能去访问，就不能一起访问了</p><p><img src="https://i.loli.net/2020/04/29/DJ1bAlSLjfRqFpt.jpg" alt="有多线程和没有多线程之间的区别"></p><p><strong>解释</strong>：没有多线程的话，main只能一步一步慢慢走。有多线程的话，可以同时有两条路一起走。</p><h3 id="核心概念"><a href="#核心概念" class="headerlink" title="核心概念"></a>核心概念</h3><ul><li>线程就是独立的执行路径；</li><li>在程序运行时，即使没有自己创建线程，后台也会存在多个线程，如gc线程、主线程；</li><li>main()称之为主线程，为系统的入口点，用于执行整个程序；</li><li>在一个进程中，如果开辟了多个线程，线程的运行由调度器安排调度，调度器是与操作系统紧密相关的，先后顺序是不能人为的干预的；</li><li>对同一份资源操作时，会存在资源抢夺的问题，需要加入并发控制；</li><li>线程会带来额外的开销，如CPU调度时间，并发控制开销；</li><li>每个线程在自己的工作内存交互，加载和存储主内存控制不当会造成数据不一致。</li></ul><p>main()称之为主线程，微系统的入口点，用于执行整个程序。</p><h2 id="线程实现"><a href="#线程实现" class="headerlink" title="线程实现"></a>线程实现</h2><h2 id="线程状态"><a href="#线程状态" class="headerlink" title="线程状态"></a>线程状态</h2><h2 id="线程同步"><a href="#线程同步" class="headerlink" title="线程同步"></a>线程同步</h2><h2 id="生产消费者"><a href="#生产消费者" class="headerlink" title="生产消费者"></a>生产消费者</h2><h2 id="高级主题"><a href="#高级主题" class="headerlink" title="高级主题"></a>高级主题</h2>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Java多线程日记&quot;&gt;&lt;a href=&quot;#Java多线程日记&quot; class=&quot;headerlink&quot; title=&quot;Java多线程日记&quot;&gt;&lt;/a&gt;Java多线程日记&lt;/h1&gt;&lt;p&gt;目前应用“双十一”“12306”&lt;/p&gt;
&lt;p&gt;三高：高可用、高性能、高并发&lt;/p&gt;
      
    
    </summary>
    
    
      <category term="技术" scheme="https://mr8god.cn/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="Java日记" scheme="https://mr8god.cn/tags/Java%E6%97%A5%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>Java多线程日记</title>
    <link href="https://mr8god.cn/2020/04/29/%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0/"/>
    <id>https://mr8god.cn/2020/04/29/%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0/</id>
    <published>2020-04-29T03:18:39.000Z</published>
    <updated>2020-04-28T16:37:50.395Z</updated>
    
    <content type="html"><![CDATA[<h1 id="数据库学习日记"><a href="#数据库学习日记" class="headerlink" title="数据库学习日记"></a>数据库学习日记</h1><h2 id="界面操作（单指SQLServerManagement）"><a href="#界面操作（单指SQLServerManagement）" class="headerlink" title="界面操作（单指SQLServerManagement）"></a>界面操作（单指SQLServerManagement）</h2><p>数据库：创建、删除、分离、附加、生成脚本（架构，数据）</p><p>表：创建、修改、删除</p><p>字段类型介绍：int、bit、datetime、decimal、char/varchar/nvarchar<br>带不带n：</p><ul><li>带n：表示Unicode编码，每个字符占一个字节</li><li>不带n：表示非Unicode编码，英文或数字占一个字节，中文占两个字节</li></ul><p>带不带var：举列子char(5)，要存入’abc’</p><ul><li>不带var：’abc<em> </em>‘    后边会有两个空格（固定式，不可变长度，会在末尾补空格，能用固定就用固定，比如说固定的电话号码长度，这样性能会更高）</li><li>带var：’abc’     后边不带空格（非固定式，可变长度，性能会低一点，但是对于一些长度不定的，比如说姓名，会有奇效）</li></ul><h2 id="利用SQL语句创建数据库"><a href="#利用SQL语句创建数据库" class="headerlink" title="利用SQL语句创建数据库"></a>利用SQL语句创建数据库</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">database</span> [<span class="keyword">database</span><span class="string">'s name]</span></span><br><span class="line"><span class="string">on primary</span></span><br><span class="line"><span class="string">                 (</span></span><br><span class="line"><span class="string">                 name = '</span>stuDB_data<span class="string">',</span></span><br><span class="line"><span class="string">                 filename = '</span>D:\stuDB_data.mdf<span class="string">',</span></span><br><span class="line"><span class="string">                 size = 5mb,</span></span><br><span class="line"><span class="string">                 maxsize = 100mb,</span></span><br><span class="line"><span class="string">                 filegrowth = 15%</span></span><br><span class="line"><span class="string">                 )</span></span><br><span class="line"><span class="string">                 </span></span><br><span class="line"><span class="string">log on</span></span><br><span class="line"><span class="string">                 (</span></span><br><span class="line"><span class="string">                 name = '</span>stuDB_logo<span class="string">',</span></span><br><span class="line"><span class="string">                 filename = '</span>D:\stuDB_logo.ldf<span class="string">',</span></span><br><span class="line"><span class="string">                 size = 2mb,</span></span><br><span class="line"><span class="string">                 maxsize = 1mb,</span></span><br><span class="line"><span class="string">                 filegrowth = 15%</span></span><br><span class="line"><span class="string">                 )</span></span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> database_name </span><br><span class="line"><span class="keyword">ON</span>    </span><br><span class="line">&#123;  [ PRIMARY ]  </span><br><span class="line">( </span><br><span class="line">                 <span class="keyword">NAME</span> = logical_file_name ,    </span><br><span class="line">FILENAME = ‘os_file_name’ </span><br><span class="line">[ , <span class="keyword">SIZE</span> = <span class="keyword">size</span>]  </span><br><span class="line">[ , <span class="keyword">MAXSIZE</span> = &#123; max_size | <span class="keyword">UNLIMITED</span> &#125; ] </span><br><span class="line">[ , FILEGROWTH = growth_increment ])</span><br><span class="line">&#125; [ ,...n ] </span><br><span class="line"><span class="keyword">LOG</span> <span class="keyword">ON</span> </span><br><span class="line">&#123;  [ PRIMARY ]  ( </span><br><span class="line">    <span class="keyword">NAME</span> = logical_file_name ,   </span><br><span class="line">FILENAME = ‘os_file_name’ </span><br><span class="line">[ , <span class="keyword">SIZE</span> = <span class="keyword">size</span>] </span><br><span class="line">[ , <span class="keyword">MAXSIZE</span> = &#123; max_size | <span class="keyword">UNLIMITED</span> &#125; ] </span><br><span class="line">[ , FILEGROWTH = growth_increment ])</span><br><span class="line">&#125; [ ,...n ]</span><br></pre></td></tr></table></figure><h2 id="利用SQL语句操作表"><a href="#利用SQL语句操作表" class="headerlink" title="利用SQL语句操作表"></a>利用SQL语句操作表</h2>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;数据库学习日记&quot;&gt;&lt;a href=&quot;#数据库学习日记&quot; class=&quot;headerlink&quot; title=&quot;数据库学习日记&quot;&gt;&lt;/a&gt;数据库学习日记&lt;/h1&gt;&lt;h2 id=&quot;界面操作（单指SQLServerManagement）&quot;&gt;&lt;a href=&quot;#界面操作（单
      
    
    </summary>
    
    
      <category term="技术" scheme="https://mr8god.cn/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="数据库" scheme="https://mr8god.cn/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
  </entry>
  
  <entry>
    <title>搭建我的第一台群晖服务器</title>
    <link href="https://mr8god.cn/2020/04/24/%E6%90%AD%E5%BB%BA%E6%88%91%E7%9A%84%E7%AC%AC%E4%B8%80%E5%8F%B0%E7%BE%A4%E6%99%96%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    <id>https://mr8god.cn/2020/04/24/%E6%90%AD%E5%BB%BA%E6%88%91%E7%9A%84%E7%AC%AC%E4%B8%80%E5%8F%B0%E7%BE%A4%E6%99%96%E6%9C%8D%E5%8A%A1%E5%99%A8/</id>
    <published>2020-04-23T16:13:25.594Z</published>
    <updated>2020-04-23T16:13:25.594Z</updated>
    
    <content type="html"><![CDATA[<h1 id="搭建我的第一台群晖服务器"><a href="#搭建我的第一台群晖服务器" class="headerlink" title="搭建我的第一台群晖服务器"></a>搭建我的第一台群晖服务器</h1><p>首先建造群晖专用系统盘</p><p>找一个U盘</p><h2 id="制作系统盘"><a href="#制作系统盘" class="headerlink" title="制作系统盘"></a>制作系统盘</h2><p>Step1：<br>使用DiskGenuis工具将U盘的所有分区都清除掉</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;搭建我的第一台群晖服务器&quot;&gt;&lt;a href=&quot;#搭建我的第一台群晖服务器&quot; class=&quot;headerlink&quot; title=&quot;搭建我的第一台群晖服务器&quot;&gt;&lt;/a&gt;搭建我的第一台群晖服务器&lt;/h1&gt;&lt;p&gt;首先建造群晖专用系统盘&lt;/p&gt;
&lt;p&gt;找一个U盘&lt;/p&gt;
&lt;
      
    
    </summary>
    
    
    
  </entry>
  
  <entry>
    <title>Java日记——关于HashSet的源码剖析</title>
    <link href="https://mr8god.cn/2020/04/22/Java/Java%E6%97%A5%E8%AE%B0/Java%E6%97%A5%E8%AE%B0%E2%80%94%E2%80%94%E5%85%B3%E4%BA%8EHashSet%E7%9A%84%E6%BA%90%E7%A0%81%E5%89%96%E6%9E%90/"/>
    <id>https://mr8god.cn/2020/04/22/Java/Java%E6%97%A5%E8%AE%B0/Java%E6%97%A5%E8%AE%B0%E2%80%94%E2%80%94%E5%85%B3%E4%BA%8EHashSet%E7%9A%84%E6%BA%90%E7%A0%81%E5%89%96%E6%9E%90/</id>
    <published>2020-04-22T14:32:52.000Z</published>
    <updated>2020-04-22T15:44:20.488Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Java日记——关于HashSet的源码剖析"><a href="#Java日记——关于HashSet的源码剖析" class="headerlink" title="Java日记——关于HashSet的源码剖析"></a>Java日记——关于HashSet的源码剖析</h1><h2 id="序言"><a href="#序言" class="headerlink" title="序言"></a>序言</h2><p>这个我随手整到的一个知识点，确实很值得深挖，我在这其中得到的知识点也远大于其本身，这一点知识让我明白了任何小知识都得深挖源码，收获太大了。</p><p>首先感谢一下带给我思路的知乎答者：<a href="https://www.zhihu.com/question/28414001" target="_blank" rel="noopener">https://www.zhihu.com/question/28414001</a></p><p>下面正式开始我的表演</p><h2 id="首先（看结果）"><a href="#首先（看结果）" class="headerlink" title="首先（看结果）"></a>首先（看结果）</h2><p>以一段代码开始</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.mr8god.kchaptereleven;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.HashSet;</span><br><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr8god</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/4/22</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@time</span> 20:37</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SetOfInteger</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Random rnd = <span class="keyword">new</span> Random(<span class="number">47</span>);</span><br><span class="line">        Set&lt;Integer&gt; intset = <span class="keyword">new</span> HashSet&lt;Integer&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10000</span>; i++)&#123;</span><br><span class="line">            intset.add(rnd.nextInt(<span class="number">30</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(intset);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这是一段平平无奇的，展示<strong>HashSet</strong>魅力的一段代码。代码的意思也很简单，就是让随机生成的0~29的数字存入我们的<strong>Set</strong>当中去。这里边随机了10000次，就意味着有很多很多重复的数字，当然我们大<strong>Set</strong>家族绝对不会包容两个一模一样的玩意儿，所以输出结果很是理想（单指这方面的理想），它就输出了这三十个数字</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29]</span><br></pre></td></tr></table></figure><p>但是呢，结果却好像有点违背了我们所讲的“<strong>无序</strong>”，这明明是有顺序的一个一个排着输出的呀，啷个嘞就给我说成“<strong>无序</strong>”了呢？顺便展示一下概念</p><blockquote><p>HashSet：一种没有重复元素的无序集合</p></blockquote><p>我先来回答这个问题：我们一般所说的<strong>HashSet</strong>是无序的，但是它既不能保证存储和取出顺序一致， 更不能保证自然顺序一致（按照a-z）</p><p>顺道一提，我《Thinking in Java》书本中的输出是这样的</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[15, 8, 23, 16, 7, 22, 9, 21, 6, 1 , 29 , 14, 24, 4, 19, 26, 11, 18, 3, 12, 27, 17, 2, 13, 28, 20, 25, 10, 5, 0]</span><br></pre></td></tr></table></figure><p>现在是不是就很奇妙了，为啥我同一段代码运行出来会是两个不同的结果，一个“<strong>有序</strong>”，一个“<strong>无序</strong>“。其实按照我江某人在C++中的经验来看，这很有可能就是语言版本的问题，这边很有可能就是<strong>JDK版本</strong>的问题，于是我们来分析源码验证我的思路</p><h2 id="然后（分析源码）"><a href="#然后（分析源码）" class="headerlink" title="然后（分析源码）"></a>然后（分析源码）</h2><p>我们首先从程序的第一步——集合元素的存储开始看起，先看<strong>HashSet</strong> 的 <strong>add</strong>方法的源码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// HashSet 源码节选-JKD8</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">add</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> map.put(e, PRESENT)==<span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我们可以看到，<strong>HashSet</strong>直接调用的是<strong>HashMap</strong>的<strong>put</strong>方法，并且将元素<strong>e</strong>放到<strong>map</strong>的<strong>key</strong>位置（保证了唯一性）</p><p>顺着线索继续查看我们的<strong>HashMap</strong>的<strong>put</strong>方法源码:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//HashMap 源码节选-JDK8</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> V <span class="title">put</span><span class="params">(K key, V value)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> putVal(hash(key), key, value, <span class="keyword">false</span>, <span class="keyword">true</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>而我们的值在返回前需要经过<strong>HashMap</strong>中的<strong>hash</strong>方法</p><p>接着定位到<strong>hash</strong>方法的源码</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> <span class="title">hash</span><span class="params">(Object key)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> h;</span><br><span class="line">    <span class="keyword">return</span> (key == <span class="keyword">null</span>) ? <span class="number">0</span> : (h = key.hashCode()) ^ (h &gt;&gt;&gt; <span class="number">16</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>hash</strong>方法的返回结果中是一句三目运算符，键（<strong>key</strong>）为<strong>null</strong>即返回0，存在则返回后一句的内容</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(h = key.hashCode()) ^ (h &gt;&gt;&gt; <span class="number">16</span>)</span><br></pre></td></tr></table></figure><p>重点来了，这个东西叫做“<strong>扰动函数</strong>”</p><h3 id="这个时候断一下我们再来分析一下"><a href="#这个时候断一下我们再来分析一下" class="headerlink" title="这个时候断一下我们再来分析一下"></a>这个时候断一下我们再来分析一下</h3><p><strong>hashCode</strong>是<strong>Object</strong>类中的一个方法，在子类中一般会被重写，而根据我们之前自己给出的程序，暂以<strong>Integer</strong>类型为例，我们来看一下<strong>Integer</strong>中<strong>hashCode</strong>方法的源码</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Returns a hash code for this &#123;<span class="doctag">@code</span> Integer&#125;.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span>  a hash code value for this object, equal to the</span></span><br><span class="line"><span class="comment"> *          primitive &#123;<span class="doctag">@code</span> int&#125; value represented by this</span></span><br><span class="line"><span class="comment"> *          &#123;<span class="doctag">@code</span> Integer&#125; object.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> Integer.hashCode(value);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Returns a hash code for a &#123;<span class="doctag">@code</span> int&#125; value; compatible with</span></span><br><span class="line"><span class="comment"> * &#123;<span class="doctag">@code</span> Integer.hashCode()&#125;.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> value the value to hash</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 1.8</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> a hash code value for a &#123;<span class="doctag">@code</span> int&#125; value.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">(<span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> value;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>果然，不出所料，这边真的重写<strong>hashCode</strong>了，<strong>Integer</strong>中<strong>hasCode</strong>方法的返回值就是这个数本身</p><p>注释：其实整数的值因为与整数本身一样唯一，所以它也是一个足够好的散列值呢</p><p>这上面得出的结论就是，下面的<strong>A式</strong>和<strong>B式</strong>是等价的</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">A：(h = key.hashCode()) ^ (h &gt;&gt;&gt; <span class="number">16</span>)</span><br><span class="line">B：key ^ (h &gt;&gt;&gt; <span class="number">16</span>)</span><br></pre></td></tr></table></figure><p>over，继续回归正途，接下来就是直接进行位运算层面了</p><h2 id="接着（转攻计算散列值——位运算开始了）"><a href="#接着（转攻计算散列值——位运算开始了）" class="headerlink" title="接着（转攻计算散列值——位运算开始了）"></a>接着（转攻计算散列值——位运算开始了）</h2><p>首先不急，先理清思路，这个时候</p><p><strong>HashSet</strong>因为底层使用了<strong>哈希表（链表结合数组）</strong>实现，存储<strong>key</strong>时可以通过一系列运算后得出自己在数组中所处的位置。</p><p>我们在<strong>hashCode</strong>方法中返回到了一个等同于本身值的散列值（证明过程如“然后（分析源码）”中的“这个时候断一下我们再来分析一下”可见）。</p><p>但是呢，考虑到<strong>int</strong>类型数据的范围：-2147483648~2147483647，很明显，这些散列值不能够直接使用，因为内存是没有办法放得下一个40亿长度的数组的。所以它使用了对数组长度进行<strong>取模运算</strong>的解决方法，得余后再作为其数组下标。</p><p>在<strong>JDK7</strong>中，这个被称为<strong>indexFor()</strong>的方法就是用来做这个的。<br>在<strong>JDK8</strong>中，就是一句代码，其实和<strong>JDK7</strong>的一样</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//JDK8中</span></span><br><span class="line">(tab.length - <span class="number">1</span>) &amp; hash；</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//JDK7中 </span></span><br><span class="line">bucketIndex = indexFor(hash, table.length);</span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">indexFor</span><span class="params">(<span class="keyword">int</span> h, <span class="keyword">int</span> length)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> h &amp; (length - <span class="number">1</span>); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>顺道加一句</strong>，为什么我们取模运算不用<strong>%</strong>而用<strong>&amp;</strong>呢？因为位运算直接对内存数据进行操作，不需要转成十进制，因此处理速度会非常快，这样就导致了位运算<strong>&amp;</strong>效率要比取模运算<strong>%</strong>高很多。</p><p>看到这边我们就知道了，存储时<strong>key</strong>的下标位置是需要通过<strong>hash</strong>方法和<strong>indexFor()</strong>或<strong>JDK8的类indexFor()</strong>运算得来的。</p><h3 id="正式开始我们的位运算（-amp-）"><a href="#正式开始我们的位运算（-amp-）" class="headerlink" title="正式开始我们的位运算（&amp;）"></a>正式开始我们的位运算（&amp;）</h3><p>我们开始举个例子了</p><p>HashMap中初始长度为16，length - 1 = 15；其二进制表示为 00000000 00000000 00000000 00001111</p><p>而与运算计算方式为：遇0则0，我们随便举一个<strong>key</strong>值</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1111 1111 1010 0101 1111 0000 0011 1100 </span><br><span class="line">&amp; 0000 0000 0000 0000 0000 0000 0000 1111 </span><br><span class="line">---------------------------------------------------- </span><br><span class="line">0000 0000 0000 0000 0000 0000 0000 1100</span><br></pre></td></tr></table></figure><p>上面随便举的<strong>key</strong>值就是：1111 1111 1010 0101 1111 0000 0011 1100 </p><p>我们将这32位从中分开，左边16位称作高位，右边16位称作低位，可以看到经过&amp;运算后 结果就是高位全部归0，剩下了低位的最后四位。但是问题就来了，我们按照当前初始长度为默认的16，HashCode值为下图两个，可以看到，在不经过扰动计算时，只进行与(&amp;)运算后 Index值均为 12 这也就导致了哈希冲突</p><p><img src="https://i.loli.net/2020/04/22/HAvmCw7KOF6t3B1.jpg" alt="需要的.jpg"></p><blockquote><p>哈希冲突的简单理解：计划把一个对象插入到散列表（哈希表）中，但是发现这个位置已经被别人的对象给占据了</p></blockquote><p>例子中，两个不同的HashCode值却经过运算后，得到了相同的值，也就代表，他们都需要被放在下标为2的位置</p><p>一般来说，如果数据分布比较广泛，而且存储数据的数组长度比较大，那么哈希冲突就会比较少，否则很高。</p><p>但是，如果像上例中只取最后几位的时候，这可不是什么好事，即使我的数据分布很散乱，但是哈希冲突仍然会很严重。</p><p>别忘了，我们的扰动函数还在前面搁着呢，这个时候它就要发挥强大的作用了,还是使用上面两个发生了哈希冲突的数据，这一次我们加入扰动函数再进行与(&amp;)运算</p><p><img src="https://i.loli.net/2020/04/22/CPfnloXFEBtIJgA.jpg" alt="对哈希冲突的解决2.jpg"></p><blockquote><p>补充 ：&gt;&gt;&gt; 按位右移补零操作符，左操作数的值按右操作数指定的为主右移，移动得到的空位以零填充<br>^     位异或运算，相同则0，不同则1</p></blockquote><p>可以看到，本发生了哈希冲突的两组数据，经过扰动函数处理后，数值变得不再一样了，也就避免了冲突</p><p>其实在<strong>扰动函数</strong>中，将<strong>数据右位移16位</strong>，哈希码的<strong>高位和低位混合</strong>了起来，这也正解决了前面所讲 高位归0，计算只依赖低位最后几位的情况,  这使得高位的一些特征也<strong>对低位产生了影响</strong>，使得<strong>低位的随机性加强</strong>，能更好的<strong>避免冲突</strong></p><h2 id="再然后"><a href="#再然后" class="headerlink" title="再然后"></a>再然后</h2><p>到了这里，我们一步步研究到了这一些知识</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">HashSet <span class="title">add</span><span class="params">()</span> → HashMap <span class="title">put</span><span class="params">()</span> → HashMap <span class="title">hash</span><span class="params">()</span> → <span class="title">HashMap</span> <span class="params">(tab.length - <span class="number">1</span>)</span> &amp; hash；</span></span><br></pre></td></tr></table></figure><p>有了这些知识的铺垫，我对于刚开始自己举的例子又产生了一些疑惑,我使用<strong>for循环</strong>添加一些整型元素进入集合，难道就没有任何一个发生哈希冲突吗，为什么遍历结果是有序输出的，经过简单计算 2 和18这两个值就都是2</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;key &#x3D; 2,(length -1) &#x3D; 15 </span><br><span class="line"></span><br><span class="line">h &#x3D; key.hashCode() 0000 0000 0000 0000 0000 0000 0000 0010 </span><br><span class="line">h &gt;&gt;&gt; 16 0000 0000 0000 0000 0000 0000 0000 0000 </span><br><span class="line">hash &#x3D; h^(h &gt;&gt;&gt; 16) 0000 0000 0000 0000 0000 0000 0000 0010 </span><br><span class="line">(tab.length-1)&amp;hash 0000 0000 0000 0000 0000 0000 0000 1111 </span><br><span class="line">0000 0000 0000 0000 0000 0000 0000 0010 </span><br><span class="line">------------------------------------------------------------- </span><br><span class="line">0000 0000 0000 0000 0000 0000 0000 0010</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;2的十进制结果：2</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;key &#x3D; 18,(length -1) &#x3D; 15</span><br><span class="line"></span><br><span class="line">h &#x3D; key.hashCode() 0000 0000 0000 0000 0000 0000 0001 0010 </span><br><span class="line">h &gt;&gt;&gt; 16 0000 0000 0000 0000 0000 0000 0000 0000 </span><br><span class="line">hash &#x3D; h^(h &gt;&gt;&gt; 16) 0000 0000 0000 0000 0000 0000 0001 0010 </span><br><span class="line">(tab.length-1)&amp;hash 0000 0000 0000 0000 0000 0000 0000 1111 </span><br><span class="line">0000 0000 0000 0000 0000 0000 0000 0010 </span><br><span class="line">------------------------------------------------------------- </span><br><span class="line">0000 0000 0000 0000 0000 0000 0000 0010 </span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;18的十进制结果：2</span><br></pre></td></tr></table></figure><p>按照我们上面的知识，按理应该输出 1 2 18 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 但却仍有序输出了</p><p>这就非常苦恼了，不过我发现了一个有趣的现象，当我的代码如下时</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.mr8god.kchaptereleven;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.HashSet;</span><br><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr8god</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/4/22</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@time</span> 20:37</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SetOfInteger</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Random rnd = <span class="keyword">new</span> Random(<span class="number">47</span>);</span><br><span class="line">        Set&lt;Integer&gt; intset = <span class="keyword">new</span> HashSet&lt;Integer&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++)&#123;</span><br><span class="line">            intset.add(rnd.nextInt(<span class="number">30</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(intset);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>输出结果是</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[5, 8, 13]</span><br></pre></td></tr></table></figure><p>于是我将问题的核心转为了<strong>数组长度问题</strong>，这个就是最终的大Boss了</p><h2 id="最后（大Boss——数组长度）"><a href="#最后（大Boss——数组长度）" class="headerlink" title="最后（大Boss——数组长度）"></a>最后（大Boss——数组长度）</h2><p>继续找到<strong>HashMap</strong>源码，我发现了一个有趣的东西</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * The maximum capacity, used if a higher value is implicitly specified</span></span><br><span class="line"><span class="comment"> * by either of the constructors with arguments.</span></span><br><span class="line"><span class="comment"> * MUST be a power of two &lt;= 1&lt;&lt;30.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> MAXIMUM_CAPACITY = <span class="number">1</span> &lt;&lt; <span class="number">30</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * The load factor used when none specified in constructor.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">float</span> DEFAULT_LOAD_FACTOR = <span class="number">0.75f</span>;</span><br></pre></td></tr></table></figure><blockquote><p>&lt;&lt; ：按位左移运算符，做操作数按位左移右错作数指定的位数，即左边最高位丢弃，右边补齐0，计算的简便方法就是：把 &lt;&lt; 左面的数据乘以2的移动次幂<br>为什么初始长度为16：1 &lt;&lt; 4 即 1 * 2 ^4 =16; </p></blockquote><p>这里边有一个叫做<strong>加载因子</strong>的东西，他默认值为0.75f，这是什么意思呢，我们来补充一点它的知识：</p><blockquote><p>加载因子就是表示哈希表中元素填满的程度，当表中元素过多，超过加载因子的值时，哈希表会自动扩容，一般是一倍，这种行为可以称作rehashing(再哈希)。<br>加载因子的值设置的越大，添加的元素就会越多，确实空间利用率的到了很大的提升，但是毫无疑问，就面临着哈希冲突的可能性增大，反之，空间利用率造成了浪费，但哈希冲突也减少了，所以我们希望在空间利用率与哈希冲突之间找到一种我们所能接受的平衡，经过一些试验，定在了0.75f</p></blockquote><p>现在可以解决我们上面的疑惑了</p><p>数组初始的实际长度 = 16 * 0.75 = 12</p><p>这代表当我们元素数量增加到12以上时就会发生扩容，当我们上例中for循环添加0-18， 这19个元素时，先保存到前12个到第十三个元素时，超过加载因子，导致数组发生了一次扩容，而扩容以后对应与(&amp;)运算的(tab.length-1)就发生了变化,从16-1 变成了 32-1 即31</p><p>我们来算一下</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;key &#x3D; 2,(length -1) &#x3D; 31 </span><br><span class="line">h &#x3D; key.hashCode() 0000 0000 0000 0000 0000 0000 0001 0010 </span><br><span class="line">h &gt;&gt;&gt; 16 0000 0000 0000 0000 0000 0000 0000 0000 </span><br><span class="line">hash &#x3D; h^(h &gt;&gt;&gt; 16) 0000 0000 0000 0000 0000 0000 0001 0010 </span><br><span class="line">(tab.length-1)&amp;hash 0000 0000 0000 0000 0000 0000 0011 1111 </span><br><span class="line">0000 0000 0000 0000 0000 0000 0000 0010 </span><br><span class="line">------------------------------------------------------------- </span><br><span class="line">0000 0000 0000 0000 0000 0000 0000 0010 </span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;十进制结果：2</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;key &#x3D; 18,(length -1) &#x3D; 31 </span><br><span class="line">h &#x3D; key.hashCode() 0000 0000 0000 0000 0000 0000 0001 0010 </span><br><span class="line">h &gt;&gt;&gt; 16 0000 0000 0000 0000 0000 0000 0000 0000 </span><br><span class="line">hash &#x3D; h^(h &gt;&gt;&gt; 16) 0000 0000 0000 0000 0000 0000 0001 0010 </span><br><span class="line">(tab.length-1)&amp;hash 0000 0000 0000 0000 0000 0000 0011 1111 </span><br><span class="line">0000 0000 0000 0000 0000 0000 0000 0010 </span><br><span class="line">------------------------------------------------------------- </span><br><span class="line">0000 0000 0000 0000 0000 0000 0001 0010 </span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;十进制结果：18</span><br></pre></td></tr></table></figure><p>当length -  1 的值发生改变的时候，18的值也变成了本身。</p><p>到这里，才意识到自己之前用2和18计算时 均使用了 length -1 的值为 15是错误的，当时并不清楚<strong>加载因子及它的扩容机制</strong>，这才是导致提出有问题疑惑的根本原因。</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p><strong>JDK7</strong>到<strong>JDK8</strong>，其内部发生了一些变化，导致在不同版本<strong>JDK</strong>下运行结果不同，根据上面的分析，我们从<strong>HashSet</strong>追溯到<strong>HashMap</strong>的<strong>hash</strong>算法、加载因子和默认长度。</p><p>由于我们所创建的<strong>HashSet</strong>是<strong>Integer</strong>类型的，这也是最巧的一点，<strong>Integer</strong>类型<strong>hashCode()</strong>的返回值就是其<strong>int</strong>值本身，而存储的时候元素通过一些运算后会得出自己在数组中所处的位置。由于在这一步，其本身即下标(只考虑这一步)，其实已经实现了排序功能，由于<strong>int</strong>类型范围太广，内存放不下，所以对其进行取模运算，为了减少哈希冲突，又在取模前进行了，扰动函数的计算，得到的数作为元素下标，按照<strong>JDK8</strong>下的<strong>hash</strong>算法，以及<strong>load factor</strong>及扩容机制，这就导致数据在经过 <strong>HashMap.hash()</strong>运算后仍然是自己本身的值，且没有发生哈希冲突。</p><p><strong>补充</strong>：对于有序无序的理解</p><p>集合所说的序，是指元素存入集合的顺序，当元素存储顺序和取出顺序一致时就是有序，否则就是无序。 </p><p>并不是说存储数据的时候无序，没有规则，当我们不论使用<strong>for循环</strong>随机数添加元素的时候，还是<strong>for循环</strong>有序添加元素的时候，最后遍历输出的结果均为按照值的大小排序输出，随机添加元素，但结果仍有序输出，这就对照着上面那句，存储顺序和取出顺序是不一致的，所以我们说<strong>HashSet</strong>是无序的，虽然我们按照123的顺序添加元素，结果虽然仍为123，但这只是一种巧合而已。</p><p>所以<strong>HashSet</strong>只是<strong>不保证有序</strong>，并<strong>不是保证无序</strong></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Java日记——关于HashSet的源码剖析&quot;&gt;&lt;a href=&quot;#Java日记——关于HashSet的源码剖析&quot; class=&quot;headerlink&quot; title=&quot;Java日记——关于HashSet的源码剖析&quot;&gt;&lt;/a&gt;Java日记——关于HashSet的源码
      
    
    </summary>
    
    
      <category term="技术" scheme="https://mr8god.cn/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="Java日记" scheme="https://mr8god.cn/tags/Java%E6%97%A5%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>Java日记——持有对象（就是容器啦）</title>
    <link href="https://mr8god.cn/2020/04/20/Java/Java%E6%97%A5%E8%AE%B0/Java%E6%97%A5%E8%AE%B0%E2%80%94%E2%80%94%E6%8C%81%E6%9C%89%E5%AF%B9%E8%B1%A1%EF%BC%88%E5%B0%B1%E6%98%AF%E5%AE%B9%E5%99%A8%E5%95%A6%EF%BC%89/"/>
    <id>https://mr8god.cn/2020/04/20/Java/Java%E6%97%A5%E8%AE%B0/Java%E6%97%A5%E8%AE%B0%E2%80%94%E2%80%94%E6%8C%81%E6%9C%89%E5%AF%B9%E8%B1%A1%EF%BC%88%E5%B0%B1%E6%98%AF%E5%AE%B9%E5%99%A8%E5%95%A6%EF%BC%89/</id>
    <published>2020-04-20T13:18:39.000Z</published>
    <updated>2020-04-22T00:48:38.607Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Java日记——持有对象（就是容器啦）"><a href="#Java日记——持有对象（就是容器啦）" class="headerlink" title="Java日记——持有对象（就是容器啦）"></a>Java日记——持有对象（就是容器啦）</h1><p>攒了两天，都在好好看容器类，Java的容器类还只是看了个大概哈，今天给大家带来我初学的Java容器中的<strong>迭代器</strong></p><h2 id="迭代器简介"><a href="#迭代器简介" class="headerlink" title="迭代器简介"></a>迭代器简介</h2><p>迭代器也是一种设计模式，广泛用于情景比如：不需要重写代码就可以应用于不同类型的容器，可能大家不太理解哈，我换句话简单来讲：比如我们原本使用<strong>List</strong>进行编码的，但是后来发现如果能够把相同的代码应用于<strong>Set</strong>，将会显得非常方便，此时我们应该怎么做呢？从头开始编写通用的代码？<strong>nonono</strong>，其实他们只是使用<strong>容器</strong>而已，并不会在乎容器的类型，那么如何才能不重写代码就可以应用于不同类型的容器呢？</p><p>在<strong>Java</strong>中迭代器就是<strong>Iterator</strong>这个东西。迭代器其实也是一个对象，它的工作就是遍历并选择序列中的对象，而客户端程序员不必知道或关心序列底层的结构，就可以使用序列了。</p><p>此外，迭代器通常被称为<strong>轻量级对象</strong>：创建它的代价小。因此，经常可见到对迭代器有些奇怪的限制，例如<strong>Java</strong>中的<strong>Iterator</strong>只能单向移动，这个<strong>Iterator</strong>只能用来：</p><ol><li>使用方法<strong>iterator()</strong>要求容器返回一个<strong>Iterator</strong>。<strong>Iterator</strong>将准备好返回序列的第一个元素。</li><li>使用<strong>next()</strong>获得序列中的下一个元素。</li><li>使用<strong>hasNext()</strong>检查序列中是否还有元素。</li><li>使用<strong>remove()</strong>将迭代器新近返回的元素删除。</li></ol><p>接下来会有代码展示</p><h3 id="代码展示（Iterator）"><a href="#代码展示（Iterator）" class="headerlink" title="代码展示（Iterator）"></a>代码展示（Iterator）</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.mr8god.kchaptereleven;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> typeinfo.pets.Pet;</span><br><span class="line"><span class="keyword">import</span> typeinfo.pets.Pets;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Iterator;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr8god</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/4/20</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@time</span> 9:59</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SimpleIteration</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        List&lt;Pet&gt; pets = Pets.arrayList(<span class="number">12</span>);</span><br><span class="line">        System.out.println(pets);</span><br><span class="line">        Iterator&lt;Pet&gt; it = pets.iterator();</span><br><span class="line">        <span class="keyword">while</span>(it.hasNext())&#123;</span><br><span class="line">            Pet p = it.next();</span><br><span class="line">            System.out.print(p.id() + <span class="string">":"</span> + p + <span class="string">" "</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println();</span><br><span class="line">        <span class="keyword">for</span> (Pet p :</span><br><span class="line">                pets) &#123;</span><br><span class="line">            System.out.print(p.id() + <span class="string">":"</span> + p + <span class="string">" "</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println();</span><br><span class="line">        it = pets.iterator();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">6</span>; i++)&#123;</span><br><span class="line">            it.next();</span><br><span class="line">            it.remove();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(pets);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这段代码很简单，就一个点是之前没有遇到过的</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Iterator&lt;Pet&gt; it = pets.iterator();</span><br></pre></td></tr></table></figure><p>这个就是使用<strong>Iterator</strong>来遍历了<strong>pets</strong>了，</p><p>之后我们就可以使用<strong>hasNext()</strong>或<strong>next()</strong>了</p><p>如果你只是向前遍历<strong>List</strong>， 并不打算修改<strong>List</strong>对象本身，那么你可以看到<strong>foreach</strong>语法会显得更加的简洁。</p><p><strong>Iterator</strong>还可以移除由<strong>next()</strong>产生的最后一个元素，这意味着在调用<strong>remove()</strong>之前必须先调用<strong>next()</strong>。同理，我之后的<strong>previous</strong>也是这么个理</p><p>接收对象容器并传递它，从而在每个对象上都执行操作，这种思想就是<strong>Iterator</strong>了，当然我感觉这正是<strong>Java</strong>的精髓。</p><h3 id="代码展示二（不必知晓容器的确切类型）"><a href="#代码展示二（不必知晓容器的确切类型）" class="headerlink" title="代码展示二（不必知晓容器的确切类型）"></a>代码展示二（不必知晓容器的确切类型）</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.mr8god.kchaptereleven;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> typeinfo.pets.Pet;</span><br><span class="line"><span class="keyword">import</span> typeinfo.pets.Pets;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr8god</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/4/20</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@time</span> 10:41</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CrossContainterIteration</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">display</span><span class="params">(Iterator&lt;Pet&gt; it)</span></span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (it.hasNext())&#123;</span><br><span class="line">            Pet p = it.next();</span><br><span class="line">            System.out.print(p.id() + <span class="string">":"</span> + p + <span class="string">" "</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ArrayList&lt;Pet&gt; pets = Pets.arrayList(<span class="number">8</span>);</span><br><span class="line">        LinkedList&lt;Pet&gt; petsLL = <span class="keyword">new</span> LinkedList&lt;Pet&gt;(pets);</span><br><span class="line">        HashSet&lt;Pet&gt; petsHs = <span class="keyword">new</span> HashSet&lt;Pet&gt;(pets);</span><br><span class="line">        TreeSet&lt;Pet&gt; petsTs = <span class="keyword">new</span> TreeSet&lt;Pet&gt;(pets);</span><br><span class="line">        display(pets.iterator());</span><br><span class="line">        display(petsLL.iterator());</span><br><span class="line">        display(petsHs.iterator());</span><br><span class="line">        display(petsTs.iterator());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这里边的<strong>display()</strong>方法不包含任何有关它所遍历的序列的类型信息，</p><p>这正展示了<strong>Iterator</strong> 的真正威力：能够将遍历序列的操作与序列底层的结构分离。</p><p>正由于此，我们有时会说：迭代器统一了对容器的访问方式。</p><h2 id="异军突起——ListIterator"><a href="#异军突起——ListIterator" class="headerlink" title="异军突起——ListIterator"></a>异军突起——ListIterator</h2><p><strong>ListIterator</strong>是一个更加强大的<strong>Iterator</strong> 的子类型，它只能用于各种<strong>List</strong>类的访问。尽管<strong>Iterator</strong>只能向前移动，但是<strong>ListIterator</strong>可以双向移动。</p><p><strong>ListIterator</strong>还可以产生相对于迭代器在列表中指向的当前位置的前一个和后一个元素的索引，并且可以使用<strong>set()</strong>方法替换它访问过的最后一个元素。</p><p>你可以通过调用<strong>listIterator(n)</strong>方法产生一个指向<strong>List</strong>开始处的<strong>ListIterator</strong>， 并且还可以通过调用<strong>listIterator(n)</strong>方法创建一个一开始就指向列表索引为<strong>n</strong>的元素处的<strong>ListIterator</strong>。</p><h3 id="代码展示（ListIterator）"><a href="#代码展示（ListIterator）" class="headerlink" title="代码展示（ListIterator）"></a>代码展示（ListIterator）</h3><p>下面举代码展示：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.mr8god.kchaptereleven;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> typeinfo.pets.Pet;</span><br><span class="line"><span class="keyword">import</span> typeinfo.pets.Pets;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.ListIterator;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr8god</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/4/20</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@time</span> 20:11</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ListIteration</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        List&lt;Pet&gt; pets = Pets.arrayList(<span class="number">8</span>);</span><br><span class="line">        ListIterator&lt;Pet&gt; it = pets.listIterator();</span><br><span class="line">        <span class="keyword">while</span> (it.hasNext())&#123;</span><br><span class="line">            System.out.print(it.next() + <span class="string">", "</span> + it.nextIndex() + <span class="string">", "</span> + it.previousIndex() + <span class="string">"; "</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println();</span><br><span class="line">        <span class="keyword">while</span> (it.hasPrevious())&#123;</span><br><span class="line">            System.out.print(it.previous().id() + <span class="string">" "</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println();</span><br><span class="line">        System.out.println(pets);</span><br><span class="line">        it = pets.listIterator(<span class="number">3</span>);</span><br><span class="line">        <span class="keyword">while</span> (it.hasNext()) &#123;</span><br><span class="line">            it.next();</span><br><span class="line">            it.set(Pets.randomPet());</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(pets );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="代码展示（自个写的倒序）"><a href="#代码展示（自个写的倒序）" class="headerlink" title="代码展示（自个写的倒序）"></a>代码展示（自个写的倒序）</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.mr8god.kchaptereleven.self;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.ListIterator;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr8god</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/4/21</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@time</span> 21:51</span></span><br><span class="line"><span class="comment"> * 这个代码是《Java编程思想》第十一章持有对象的练习12（3）：</span></span><br><span class="line"><span class="comment"> * 创建并组装一个List,然后再创建第二个具有相同尺寸的List，</span></span><br><span class="line"><span class="comment"> * 将第一个List列表反序插入第二个列表中</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 这里边我的思路是首先用hasNext将LsIterator的指针滑到了容器的最后的位置</span></span><br><span class="line"><span class="comment"> * 然后我再使用previous，一步步，慢慢的往前滑，顺便赋值给int2</span></span><br><span class="line"><span class="comment"> * 其实我大可不必这么复杂，还调用previous，直接for倒序赋值就完事了</span></span><br><span class="line"><span class="comment"> * 但是这么一来我对previous的理解深入了，确实，这段代码中如果没有hasNext的话</span></span><br><span class="line"><span class="comment"> * previous是无法运行的，会报错，会爆越界，确实，我指针指在了第一个，</span></span><br><span class="line"><span class="comment"> * 我还要赋值，拿什么给他赋值呀，over，收获良多</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExerciseTwelve</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        List&lt;Integer&gt; int1 = <span class="keyword">new</span> ArrayList&lt;&gt;(<span class="number">10</span>);</span><br><span class="line">        List&lt;Integer&gt; int2 = <span class="keyword">new</span> ArrayList&lt;&gt;(<span class="number">10</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)&#123;</span><br><span class="line">            int1.add(i);</span><br><span class="line">        &#125;</span><br><span class="line"><span class="comment">//        System.out.println(int1);</span></span><br><span class="line">        <span class="keyword">int</span> counter = <span class="number">0</span>;</span><br><span class="line">        ListIterator&lt;Integer&gt; lulala = int1.listIterator();</span><br><span class="line">        <span class="keyword">while</span> (lulala.hasNext()) &#123;</span><br><span class="line">            System.out.print(lulala.next() + <span class="string">"("</span> + counter++ + <span class="string">") , "</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)&#123;</span><br><span class="line">            int2.add(lulala.previous());</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(int2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>网上的例子</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.mr8god.kchaptereleven.self;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.ListIterator;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr8god</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/4/21</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@time</span> 22:28</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExerciseTwelveTwolist</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> length;</span><br><span class="line">    List&lt;Integer&gt; list1 = <span class="keyword">new</span> ArrayList&lt;Integer&gt;(length);</span><br><span class="line">    List&lt;Integer&gt; list2 = <span class="keyword">new</span> ArrayList&lt;Integer&gt;(length);</span><br><span class="line">    ListIterator&lt;Integer&gt; li;</span><br><span class="line">    <span class="comment">// 构造函数，给list1赋值，并且将li指向list1的最末尾的一个元素</span></span><br><span class="line">     ExerciseTwelveTwolist(<span class="keyword">int</span> length)&#123;</span><br><span class="line">        <span class="keyword">this</span>.length = length;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; length; i++)&#123;</span><br><span class="line">            list1.add(i);</span><br><span class="line">        &#125;</span><br><span class="line">        li = list1.listIterator(length - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 对list2进行初始化</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">list2</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (li.hasPrevious())&#123;</span><br><span class="line">            <span class="comment">// 当ListIterator li前面具有元素时，将当前的元素</span></span><br><span class="line">            <span class="comment">// 赋值给list2，并且向前移动（即li.previous的功能）</span></span><br><span class="line">            list2.add(li.previous());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">out1</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(list1);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">out2</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(list2);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span></span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">            ExerciseTwelveTwolist ett = <span class="keyword">new</span> ExerciseTwelveTwolist(<span class="number">10</span>);</span><br><span class="line">            ett.list2();</span><br><span class="line">            ett.out1();</span><br><span class="line">            ett.out2();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>再附上作者的一些感悟，over</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">网上查询到其他解决办法，其中通过while(li.hasnext())&#123;li1.next（）;&#125;将li指向list1的末尾，并且对于list2列表的操作也使用了ListIterator（对于后者，我觉得没有必要，此题中对list2本身就应该是一个空的list，对于它的操作仅仅是通过add()方法就可以了，没必要再创建一个listIterator）。感想：最初想通过直接对list进行操作，发现并不可行，list列表只有add（），get（）等方法，事实上是很难做到对其进行类似指针移动的操作，所以日后对于每一个需要操作的list数组进行一些操作，可能都需要用到ListIterator，或者简单的Iterator。在这里也不难理解为什么在这道题中的其它解决方法里，有人会对list2也使用一个listIterator,毕竟对list2也要进行一些操作（尽管这里只需要添加元素就好了）。在编写代码的时候，我总是会想直接把ListIterator直接赋值给List列表，类似于list1&#x3D;li。事实上，这样是行不通的，List列表和迭代器ListIterator之间的关系不存在继承，仅仅是迭代器ListIterator 对Collection进行操作而已。实现赋值则是使用List的add（）方法，调用迭代器Iterator的next（）方法，传入list。（本题中使用的是list2.add(li.previous());）此外，listIterator比iterator更为强大，它可以实现双向移动，也可以直接指向某个具体的元素，而iterator则只能单向移动。最后：思考良久，决定还是不将我的博客设置为私密好了，有人能看必定是好事，发现其中错误更是可喜可贺，本人也是大三学生一枚，想记录一些自己学习过程中的问题，解决方法等，同时也想着，或许能被大神看到？对我一些遗漏之类的进行补充？那自然也能学习到不少</span><br><span class="line">————————————————</span><br><span class="line">版权声明：本文为CSDN博主「qq_41791653」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。</span><br><span class="line">原文链接：https:&#x2F;&#x2F;blog.csdn.net&#x2F;qq_41791653&#x2F;article&#x2F;details&#x2F;80004740</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Java日记——持有对象（就是容器啦）&quot;&gt;&lt;a href=&quot;#Java日记——持有对象（就是容器啦）&quot; class=&quot;headerlink&quot; title=&quot;Java日记——持有对象（就是容器啦）&quot;&gt;&lt;/a&gt;Java日记——持有对象（就是容器啦）&lt;/h1&gt;&lt;p&gt;攒了
      
    
    </summary>
    
    
      <category term="技术" scheme="https://mr8god.cn/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="Java日记" scheme="https://mr8god.cn/tags/Java%E6%97%A5%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>Java日记——接口</title>
    <link href="https://mr8god.cn/2020/04/18/Java/Java%E6%97%A5%E8%AE%B0/Java%E6%97%A5%E8%AE%B0%E2%80%94%E2%80%94%E6%8E%A5%E5%8F%A3/"/>
    <id>https://mr8god.cn/2020/04/18/Java/Java%E6%97%A5%E8%AE%B0/Java%E6%97%A5%E8%AE%B0%E2%80%94%E2%80%94%E6%8E%A5%E5%8F%A3/</id>
    <published>2020-04-17T16:29:18.000Z</published>
    <updated>2020-04-17T16:56:39.162Z</updated>
    
    <content type="html"><![CDATA[<h1 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h1><h2 id="9-3-完全解耦"><a href="#9-3-完全解耦" class="headerlink" title="9.3 完全解耦"></a>9.3 完全解耦</h2><p>假设我们有一组电子滤波器，它们适用于<strong>Apply.process()</strong>方法：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Apply.process()方法</span></span><br><span class="line"><span class="keyword">package</span> cn.mr8god.chapternine.interfaceprocessor;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> net.mindview.util.Print.print;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Apply</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">process</span><span class="params">(Processor p, Object s)</span> </span>&#123;</span><br><span class="line">        print(<span class="string">"Using Processor "</span> + p.name() );</span><br><span class="line">        print(p.process(s));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="电子滤波器代码包在下边"><a href="#电子滤波器代码包在下边" class="headerlink" title="电子滤波器代码包在下边"></a>电子滤波器代码包在下边</h3><h4 id="第一版"><a href="#第一版" class="headerlink" title="第一版"></a>第一版</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Waveform</span></span><br><span class="line"><span class="keyword">package</span> cn.mr8god.chapternine.filters;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr8god</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/4/17</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@time</span> 23:16</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Waveform</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">long</span> counter;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">long</span> id = counter++;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Waveform&#123;"</span> +</span><br><span class="line">                <span class="string">"id="</span> + id +</span><br><span class="line">                <span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Filter</span></span><br><span class="line"><span class="keyword">package</span> cn.mr8god.chapternine.filters;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr8god</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/4/17</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@time</span> 23:17</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Filter</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">name</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> getClass().getSimpleName();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Waveform <span class="title">process</span><span class="params">(Waveform input)</span></span>&#123; <span class="keyword">return</span> input; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// LowPass</span></span><br><span class="line"><span class="keyword">package</span> cn.mr8god.chapternine.filters;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr8god</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/4/17</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@time</span> 23:19</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LowPass</span> <span class="keyword">extends</span> <span class="title">Filter</span> </span>&#123;</span><br><span class="line">    <span class="keyword">double</span> cutoff;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">LowPass</span><span class="params">(<span class="keyword">double</span> cutoff)</span></span>&#123; <span class="keyword">this</span>.cutoff = cutoff; &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Waveform <span class="title">process</span><span class="params">(Waveform input)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> input;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// HighPass</span></span><br><span class="line"><span class="keyword">package</span> cn.mr8god.chapternine.filters;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr8god</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/4/17</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@time</span> 23:20</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HighPass</span> <span class="keyword">extends</span> <span class="title">Filter</span> </span>&#123;</span><br><span class="line">    <span class="keyword">double</span> cutoff;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">HighPass</span><span class="params">(<span class="keyword">double</span> cutoff)</span></span>&#123; <span class="keyword">this</span>.cutoff = cutoff; &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Waveform <span class="title">process</span> <span class="params">(Waveform input)</span></span>&#123; <span class="keyword">return</span> input; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// BandPass</span></span><br><span class="line"><span class="keyword">package</span> cn.mr8god.chapternine.filters;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr8god</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/4/17</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@time</span> 23:22</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BandPass</span> <span class="keyword">extends</span> <span class="title">Filter</span> </span>&#123;</span><br><span class="line">    <span class="keyword">double</span> lowCutoff, highCutoff;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BandPass</span><span class="params">(<span class="keyword">double</span> lowCut, <span class="keyword">double</span> highCut)</span></span>&#123;</span><br><span class="line">        lowCutoff = lowCut;</span><br><span class="line">        highCutoff = highCut;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Waveform <span class="title">process</span><span class="params">(Waveform input)</span> </span>&#123; <span class="keyword">return</span> input; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>虽然<strong>Filter</strong>和<strong>Processor</strong>（代码我贴在这段话下面）具有相同的接口元素（且它们俩输出都是<strong>Waveform</strong>），但是因为<strong>Filter</strong>并非继承自<strong>Processor</strong>因此咱不能将<strong>Filter</strong>用于<strong>Apply.process()</strong>方法，即便这样做可以正常运行。</p><p>出现这个问题就是因为<strong>Apply.process()</strong>方法和<strong>Processor</strong>之间的耦合度太高了，已经超出所需要的程度了，这就使得应该复用<strong>Apply.process()</strong>的代码的时候，复用却被禁止了。</p><h4 id="第二段改良版本"><a href="#第二段改良版本" class="headerlink" title="第二段改良版本"></a>第二段改良版本</h4><p><u>但是如果<strong>Processor</strong>是一个接口，那么这些限制就谈不上限制了，使得你可以复用<strong>Apply.process()</strong>的代码了。</u></p><p>上代码</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 这就是被写成接口的Processor</span></span><br><span class="line"><span class="keyword">package</span> cn.mr8god.chapternine.interfaceprocessor;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr8god</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/4/17</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@time</span> 23:29</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Processor</span> </span>&#123;</span><br><span class="line">    <span class="function">String <span class="title">name</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function">Object <span class="title">process</span><span class="params">(Object input)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Apply</span></span><br><span class="line"><span class="keyword">package</span> cn.mr8god.chapternine.interfaceprocessor;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> net.mindview.util.Print.print;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Apply</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">process</span><span class="params">(Processor p, Object s)</span> </span>&#123;</span><br><span class="line">        print(<span class="string">"Using Processor "</span> + p.name() );</span><br><span class="line">        print(p.process(s));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>复用代码的<strong>第一种方式</strong>是客户端程序员遵循制定好的接口来编写自己的类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.mr8god.chapternine.interfaceprocessor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr8god</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/4/17</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@time</span> 23:43</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">StringProcessor</span> <span class="keyword">implements</span> <span class="title">Processor</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">name</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> getClass().getSimpleName();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> String <span class="title">process</span><span class="params">(Object input)</span></span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String s = <span class="string">"If she weighs the same as a duck, she's made of wood"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Apply.process(<span class="keyword">new</span> Upcase(), s);</span><br><span class="line">        Apply.process(<span class="keyword">new</span> Downcase(), s);</span><br><span class="line">        Apply.process(<span class="keyword">new</span> Splitter(), s);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Upcase</span> <span class="keyword">extends</span> <span class="title">StringProcessor</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">process</span><span class="params">(Object input)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ((String) input).toUpperCase();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Downcase</span> <span class="keyword">extends</span> <span class="title">StringProcessor</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">process</span><span class="params">(Object input)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ((String) input).toLowerCase();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Splitter</span> <span class="keyword">extends</span> <span class="title">StringProcessor</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">process</span><span class="params">(Object input)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Arrays.toString(((String)input).split(<span class="string">" "</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="第三段改良版本"><a href="#第三段改良版本" class="headerlink" title="第三段改良版本"></a>第三段改良版本</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// processor的接口</span></span><br><span class="line"><span class="keyword">package</span> cn.mr8god.chapternine.interfaceprocessor;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr8god</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/4/17</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@time</span> 23:29</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Processor</span> </span>&#123;</span><br><span class="line">    <span class="function">String <span class="title">name</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function">Object <span class="title">process</span><span class="params">(Object input)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Apply的类</span></span><br><span class="line"><span class="keyword">package</span> cn.mr8god.chapternine.interfaceprocessor;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> net.mindview.util.Print.print;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Apply</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">process</span><span class="params">(Processor p, Object s)</span> </span>&#123;</span><br><span class="line">        print(<span class="string">"Using Processor "</span> + p.name() );</span><br><span class="line">        print(p.process(s));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.mr8god.chapternine.interfaceprocessor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.mr8god.chapternine.filters.*;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FilterAdapter</span> <span class="keyword">implements</span> <span class="title">Processor</span> </span>&#123;</span><br><span class="line">    Filter filter;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">FilterAdapter</span><span class="params">(Filter filter)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.filter = filter;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">name</span><span class="params">()</span></span>&#123;<span class="keyword">return</span> filter.name();&#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Waveform <span class="title">process</span><span class="params">(Object input)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> filter.process((Waveform)input);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr8god</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/4/17</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@time</span> 23:31</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FilterProcessor</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Waveform w = <span class="keyword">new</span> Waveform();</span><br><span class="line">        Apply.process(<span class="keyword">new</span> FilterAdapter(<span class="keyword">new</span> LowPass(<span class="number">1.0</span>)), w);</span><br><span class="line">        Apply.process(<span class="keyword">new</span> FilterAdapter(<span class="keyword">new</span> HighPass(<span class="number">2.0</span>)), w);</span><br><span class="line">        Apply.process(<span class="keyword">new</span> FilterAdapter(<span class="keyword">new</span> BandPass(<span class="number">3.0</span>, <span class="number">4.0</span>)), w);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>说一下这一次改良的目的为何，在电子滤波器这个例子中，类库是被发现而非被创建的。在这些情况下，可以使用<strong>适配器设计模式</strong>。适配器中的代码将接受你所拥有的接口，并产生你所需要的接口。相当于做了一个二道贩子。</p><p>此外这种方法，<strong>FilterAdapter</strong>的构造器接受你所拥有的接口<strong>Filter</strong>，然后生成具有你所需要的<strong>Processor</strong>接口的对象。</p><p>哦对了，这里边的<strong>FilterAdapter</strong>还用到了<strong>代理</strong>（第七章复用类里边的，是一种介于继承和组合之间的思想）</p><p>将接口从具体实现中<strong>解耦</strong>使得接口可以应用于多种不同的具体实现，因此代码也就更具可复用性。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;接口&quot;&gt;&lt;a href=&quot;#接口&quot; class=&quot;headerlink&quot; title=&quot;接口&quot;&gt;&lt;/a&gt;接口&lt;/h1&gt;&lt;h2 id=&quot;9-3-完全解耦&quot;&gt;&lt;a href=&quot;#9-3-完全解耦&quot; class=&quot;headerlink&quot; title=&quot;9.3 完全解耦&quot;
      
    
    </summary>
    
    
      <category term="技术" scheme="https://mr8god.cn/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="Java" scheme="https://mr8god.cn/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>Java日记——多态</title>
    <link href="https://mr8god.cn/2020/04/16/Java/Java%E6%97%A5%E8%AE%B0/Java%E6%97%A5%E8%AE%B0%E2%80%94%E2%80%94%E5%A4%9A%E6%80%81/"/>
    <id>https://mr8god.cn/2020/04/16/Java/Java%E6%97%A5%E8%AE%B0/Java%E6%97%A5%E8%AE%B0%E2%80%94%E2%80%94%E5%A4%9A%E6%80%81/</id>
    <published>2020-04-16T14:14:05.000Z</published>
    <updated>2020-04-17T07:02:52.607Z</updated>
    
    <content type="html"><![CDATA[<h1 id="多态"><a href="#多态" class="headerlink" title="多态"></a>多态</h1><h2 id="8-3-1-构造器与多态之构造器的创建顺序"><a href="#8-3-1-构造器与多态之构造器的创建顺序" class="headerlink" title="8.3.1 构造器与多态之构造器的创建顺序"></a>8.3.1 构造器与多态之构造器的创建顺序</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.mr8god.chaptereight;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> net.mindview.util.Print.print;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr8god</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/4/16</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@time</span> 20:15</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Meal</span></span>&#123;</span><br><span class="line">    Meal()&#123; print(<span class="string">"Meal()"</span>);&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bread</span></span>&#123;</span><br><span class="line">    Bread()&#123; print(<span class="string">"Bread()"</span>);&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cheese</span></span>&#123;</span><br><span class="line">    Cheese()&#123; print(<span class="string">"Cheese()"</span>);&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Lettuce</span></span>&#123;</span><br><span class="line">    Lettuce()&#123; print(<span class="string">"Lettuce()"</span>);&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Lunch</span> <span class="keyword">extends</span> <span class="title">Meal</span></span>&#123;</span><br><span class="line">    Lunch()&#123; print(<span class="string">"Lunch()"</span>);&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PortableLunch</span> <span class="keyword">extends</span> <span class="title">Lunch</span></span>&#123;</span><br><span class="line">    PortableLunch()&#123; print(<span class="string">"PortableLunch()"</span>);&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Sandwich</span> <span class="keyword">extends</span> <span class="title">PortableLunch</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Bread b = <span class="keyword">new</span> Bread();</span><br><span class="line">    <span class="keyword">private</span> Cheese c = <span class="keyword">new</span> Cheese();</span><br><span class="line">    <span class="keyword">private</span> Lettuce l = <span class="keyword">new</span> Lettuce();</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Sandwich</span><span class="params">()</span></span>&#123; print(<span class="string">"Sandwich()"</span>);&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> Sandwich();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 输出结果</span><br><span class="line">Meal()</span><br><span class="line">Lunch()</span><br><span class="line">PortableLunch()</span><br><span class="line">Bread()</span><br><span class="line">Cheese()</span><br><span class="line">Lettuce()</span><br><span class="line">Sandwich()</span><br><span class="line"></span><br><span class="line">Process finished with exit code 0</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/04/16/MsXKb6vqhkrA2ax.png" alt="理解组合继承的构建顺序.png"></p><p>快速做了个图来理解这个东西哈！这里边每个类都有自己的<strong>构造方法</strong>，</p><p>其中最值得关注的就是<strong>Sandwich</strong>类，三个继承关系，（若将<strong>Object</strong>的根继承算上的话，那就是四层继承了）。其中还包括了三个成员对象。当我们在<strong>main()</strong>里边创建好一个<strong>Sandwich</strong>对象后，就可以看到输出结果了</p><h3 id="三条规则"><a href="#三条规则" class="headerlink" title="三条规则"></a>三条规则</h3><p>我先说一下复杂对象调用构造器要遵循的<strong>三条规则</strong>吧</p><ol><li>调用基类构造器。这个步骤会不断地反复递归下去，首先是构造这种层次结构的根，然后是下一层导出类，etc，直到最低层的导出类。</li><li>按声明顺序调用成员的初始化方法。</li><li>调用导出类构造器的主体。</li></ol><p>根据输出结果我们可以看到，它首先输出的就是Meal了，为什么会这样呢？因为根据我<strong>main()</strong>函数里定义的四个东西（三个成员对象和一个成员构造函数）来看我的输出应该是</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 输出结果</span><br><span class="line">Bread()</span><br><span class="line">Cheese()</span><br><span class="line">Lettuce()</span><br><span class="line">Sandwich()</span><br><span class="line"></span><br><span class="line">Process finished with exit code 0</span><br></pre></td></tr></table></figure><p>才对呀。很正常的思维，哈哈哈。不过呢，出现前两个，其实是为了表明，<strong>Meal</strong>类和<strong>Lunch</strong>类在之前先执行了自己的构造函数，而且又因为<strong>Meal</strong>类是<strong>Lunch</strong>类的基类（父类），所以<strong>Meal</strong>类的构造函数在更前面进行了构造了，这正好说明了我之前所说的<strong>三条规则</strong>中的第一条。</p><p>接下来我们输出的就是三小只了</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Bread()</span><br><span class="line">Cheese()</span><br><span class="line">Lettuce()</span><br></pre></td></tr></table></figure><p>这符合我们之前说的，按照声明调用<strong>成员**</strong>成员**的初始化方法进行输出了</p><p>最后就是我们的导出类构造器的主体，与之对应的就是我们<strong>输出结果</strong>中的</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Sandwich()</span><br></pre></td></tr></table></figure><h3 id="说说心里话"><a href="#说说心里话" class="headerlink" title="说说心里话"></a>说说心里话</h3><p>为什么我们的构造器调用顺序很重要，以至于我专门做了个笔记来讲它呢？</p><p>我们知道当我们导出类（子类）在进行继承的时候，我们是<strong>已经知道了基类（父类）的一切</strong>了，知道它的底细是怎样的呢！不然我们谈何继承呀，只要基类中标注为<strong>protected</strong>和<strong>public</strong>的，都是知道的，这就意味着我们在导出类中，必须假定所有成员<strong>都是有效的</strong>。</p><p>综上所述，我们要确保所有的成员都是有效的，就得从根基做好，先打牢根基，才能走得更远（很像咱们的编程语言学习哦！）。于是我们先启动基类的构造器，确保基类是完好无损的。然后依次向下。</p><p>此外，知道构造器中的所有成员有效也是因为成员对象在类内进行定义的时候，只要有可能，就应该对它们进行初始化。</p><h2 id="8-3-2-继承与清理"><a href="#8-3-2-继承与清理" class="headerlink" title="8.3.2 继承与清理"></a>8.3.2 继承与清理</h2><p>平常我们都是不需要注意清理的问题的，因为毕竟有我们的垃圾处理机制嘛。如果确实遇到了清理的问题，那么就得有心创建<strong>清理方法</strong>了。并且由于是继承的缘故。如果我们有其他作为垃圾回收一部分的特殊清理动作，就必须在导出类中覆盖该<strong>清理方法</strong>。<u>当覆盖被继承类的<strong>清理方法</strong>的时候，务必调用基类版本的<strong>清理方法</strong>，否则，基类的清理就不会发生。</u></p><p>上示范代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.mr8god.chaptereight;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> net.mindview.util.Print.print;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Characteristic</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String s;</span><br><span class="line">    Characteristic(String s)&#123;</span><br><span class="line">        <span class="keyword">this</span>.s = s;</span><br><span class="line">        print(<span class="string">"Creating Characteristic "</span> + s);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">dispose</span><span class="params">()</span></span>&#123;</span><br><span class="line">        print(<span class="string">"disposing Characteristic "</span> + s);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Description</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String s;</span><br><span class="line">    Description(String s)&#123;</span><br><span class="line">        <span class="keyword">this</span>.s = s;</span><br><span class="line">        print(<span class="string">"Creating Description "</span> + s);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">dispose</span><span class="params">()</span></span>&#123;</span><br><span class="line">        print(<span class="string">"disposing Description "</span> + s);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LivingCreature</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Characteristic p =</span><br><span class="line">            <span class="keyword">new</span> Characteristic(<span class="string">"is alive"</span>);</span><br><span class="line">    <span class="keyword">private</span> Description t =</span><br><span class="line">            <span class="keyword">new</span> Description(<span class="string">"Basic Living Creature"</span>);</span><br><span class="line">    LivingCreature()&#123;</span><br><span class="line">        print(<span class="string">"LivingCreature()"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">dispose</span><span class="params">()</span></span>&#123;</span><br><span class="line">        print(<span class="string">"LivingCreature dispose"</span>);</span><br><span class="line">        t.dispose();</span><br><span class="line">        p.dispose();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span> <span class="keyword">extends</span> <span class="title">LivingCreature</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Characteristic p =</span><br><span class="line">            <span class="keyword">new</span> Characteristic(<span class="string">"has heart"</span>);</span><br><span class="line">    <span class="keyword">private</span> Description t =</span><br><span class="line">            <span class="keyword">new</span> Description(<span class="string">"Animal not Vegetable"</span>);</span><br><span class="line">    Animal()&#123; print(<span class="string">"Animal()"</span>);&#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">dispose</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        print(<span class="string">"Animal dispose"</span>);</span><br><span class="line">        t.dispose();</span><br><span class="line">        p.dispose();</span><br><span class="line">        <span class="keyword">super</span>.dispose();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Amphibian</span> <span class="keyword">extends</span> <span class="title">Animal</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Characteristic p =</span><br><span class="line">            <span class="keyword">new</span> Characteristic(<span class="string">"can live in water"</span>);</span><br><span class="line">    <span class="keyword">private</span>  Description t =</span><br><span class="line">            <span class="keyword">new</span> Description(<span class="string">"Both water and land"</span>);</span><br><span class="line">    Amphibian()&#123;</span><br><span class="line">        print(<span class="string">"Amphibian"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">dispose</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        print(<span class="string">"Amphibian dispose"</span>);</span><br><span class="line">        t.dispose();</span><br><span class="line">        p.dispose();</span><br><span class="line">        <span class="keyword">super</span>.dispose();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr8god</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/4/16</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@time</span> 11:19</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Frog</span> <span class="keyword">extends</span> <span class="title">Amphibian</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Characteristic p = <span class="keyword">new</span> Characteristic(<span class="string">"Croaks"</span>);</span><br><span class="line">    <span class="keyword">private</span> Description t = <span class="keyword">new</span> Description(<span class="string">"Eats Bugs"</span>);</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Frog</span><span class="params">()</span> </span>&#123; print(<span class="string">"Frog()"</span>);&#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">dispose</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        print(<span class="string">"Frog dispose"</span>);</span><br><span class="line">        t.dispose();</span><br><span class="line">        p.dispose();</span><br><span class="line">        <span class="keyword">super</span>.dispose();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Frog frog = <span class="keyword">new</span> Frog();</span><br><span class="line">        print(<span class="string">"Bye!"</span>);</span><br><span class="line">        frog.dispose();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 输出结果</span><br><span class="line">Creating Characteristic is alive</span><br><span class="line">Creating Description Basic Living Creature</span><br><span class="line">LivingCreature()</span><br><span class="line">Creating Characteristic has heart</span><br><span class="line">Creating Description Animal not Vegetable</span><br><span class="line">Animal()</span><br><span class="line">Creating Characteristic can live in water</span><br><span class="line">Creating Description Both water and land</span><br><span class="line">Amphibian</span><br><span class="line">Creating Characteristic Croaks</span><br><span class="line">Creating Description Eats Bugs</span><br><span class="line">Frog()</span><br><span class="line">Bye!</span><br><span class="line">Frog dispose</span><br><span class="line">disposing Description Eats Bugs</span><br><span class="line">disposing Characteristic Croaks</span><br><span class="line">Amphibian dispose</span><br><span class="line">disposing Description Both water and land</span><br><span class="line">disposing Characteristic can live in water</span><br><span class="line">Animal dispose</span><br><span class="line">disposing Description Animal not Vegetable</span><br><span class="line">disposing Characteristic has heart</span><br><span class="line">LivingCreature dispose</span><br><span class="line">disposing Description Basic Living Creature</span><br><span class="line">disposing Characteristic is alive</span><br><span class="line"></span><br><span class="line">Process finished with exit code 0</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/04/16/QzUjJZ2p9VoBC5L.png" alt="理解继承与清理.png"></p><p>代码太长，给大家整理了一个<strong>UML类图</strong>，其中<strong>dispose()</strong>就是我用来清理的方法。</p><p>然后呢，我们每个类都包括了<strong>Characteristic</strong>和<strong>Description</strong>这两种类型的成员对象，并且它们必须最终被<strong>销毁</strong>。</p><h3 id="什么是销毁顺序"><a href="#什么是销毁顺序" class="headerlink" title="什么是销毁顺序"></a>什么是销毁顺序</h3><p>谈到<strong>销毁</strong>呀，这里边还得涉及到一个<strong>销毁顺序</strong>，</p><ul><li><p>如果我们遇到某个子对象要依赖于其他对象，那么<strong>销毁的顺序</strong>应该和初始化顺序相反。</p></li><li><p>而对于<strong>字段</strong>，则意味着与声明的顺序相反（因为<strong>字段</strong>的初始化是按照声明的顺序进行的）。</p></li><li>对于基类，首先应该对其导出类进行清理，然后再是基类。</li></ul><p>上面的知识点很简单啦，就是很明白浅显的道理——<strong>先进先出</strong>嘛！</p><p>对于代码的哈，我再来个图解</p><p><img src="https://i.loli.net/2020/04/17/rmxS71Oe8UsAPTR.jpg" alt="清理代码图解.jpg"></p><p>帮助大家理解这是怎样一个过程哈</p><h3 id="代码理解"><a href="#代码理解" class="headerlink" title="代码理解"></a>代码理解</h3><h4 id="首先"><a href="#首先" class="headerlink" title="首先"></a>首先</h4><p>我主函数代码</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Frog frog = <span class="keyword">new</span> Frog();</span><br></pre></td></tr></table></figure><p>意味着我们开始<strong>Create</strong> <strong>Create</strong> <strong>Create</strong> 了，首先<strong>Frog</strong>中初始化了两个<strong>Characteristic</strong>和<strong>Description</strong>类对象，同时这也是正式开始<strong>Create</strong> <strong>Create</strong> <strong>Create</strong> 了。</p><p>具体我们是会先指向最基本的那个基类<strong>LivingCreature</strong>开始<strong>Create</strong>，然后依次往下，最后到<strong>Frog</strong>结束<strong>Create</strong>。</p><p>输出结果是：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Creating Characteristic is alive</span><br><span class="line">Creating Description Basic Living Creature</span><br><span class="line">LivingCreature()</span><br><span class="line">Creating Characteristic has heart</span><br><span class="line">Creating Description Animal not Vegetable</span><br><span class="line">Animal()</span><br><span class="line">Creating Characteristic can live in water</span><br><span class="line">Creating Description Both water and land</span><br><span class="line">Amphibian</span><br><span class="line">Creating Characteristic Croaks</span><br><span class="line">Creating Description Eats Bugs</span><br><span class="line">Frog()</span><br></pre></td></tr></table></figure><h4 id="然后"><a href="#然后" class="headerlink" title="然后"></a>然后</h4><p>我主函数代码</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="string">"Bye!"</span>);</span><br></pre></td></tr></table></figure><p>暂时小结一下哈！</p><p>输出结果是：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Bye!</span><br></pre></td></tr></table></figure><h4 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h4><p>我主函数代码是这样的：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">frog.dispose();</span><br></pre></td></tr></table></figure><p>这是调用了我<strong>Frog</strong>类中的<strong>dispose()</strong>方法，正式开始<strong>dispose</strong> <strong>dispose</strong> <strong>dispose</strong>了。</p><p><strong>dispose</strong>的顺序与之前<strong>Create</strong>的相反。它是先把底层的，最新的那个导出类（子类）先给<strong>dispose</strong>了，依次向上，最后把最终大Boss <strong>LivingCreature</strong>给<strong>dispose</strong>了，很是简单呢！！！只要花点时间看看就能懂的代码呢，以后我就不打算花时间看书看代码了，直接看我的日记不就得了，哈哈哈！</p><h2 id="8-3-2-继承与清理-为之前扫扫盲"><a href="#8-3-2-继承与清理-为之前扫扫盲" class="headerlink" title="8.3.2 继承与清理+为之前扫扫盲"></a>8.3.2 继承与清理+为之前扫扫盲</h2><p>为什么说是扫扫盲呢，难道是说我江某人在之前的学习没有努力？不不不，不是这样子的。在编程语言的学习中，我们其实不能够学完所有，得分一步步，慢慢来才能学习完整个语言，但是呢，我们在学习基础的时候，如果要写一些例子，光靠基础知识是不能够的呀，所以我们就会将后边”较<strong>高级</strong>的知识先拿来用，就好比我们的C++中漂漂亮亮的前三行，刚开始不也是想都不想先输上去为敬嘛。</p><p>好了，还是赶紧上我们的正餐，上代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.mr8god.chaptereight;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> net.mindview.util.Print.print;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Shared</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> refcount = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">long</span> counter = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">long</span> id = counter++;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Shared</span><span class="params">()</span></span>&#123;</span><br><span class="line">        print(<span class="string">"Creating "</span> + <span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addRef</span><span class="params">()</span></span>&#123; refcount++; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">dispose</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (--refcount == <span class="number">0</span>)&#123;</span><br><span class="line">            print(<span class="string">"Disposing "</span> + <span class="keyword">this</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Shared&#123;"</span> +</span><br><span class="line">                <span class="string">"id="</span> + id +</span><br><span class="line">                <span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Composing</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Shared shared;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">long</span> counter = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">long</span> id = counter++;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Composing</span><span class="params">(Shared shared)</span></span>&#123;</span><br><span class="line">        print(<span class="string">"Creating "</span> + <span class="keyword">this</span>);</span><br><span class="line">        <span class="keyword">this</span>.shared = shared;</span><br><span class="line">        <span class="keyword">this</span>.shared.addRef();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">dispose</span><span class="params">()</span></span>&#123;</span><br><span class="line">        print(<span class="string">"disposing "</span> + <span class="keyword">this</span>);</span><br><span class="line">        shared.dispose();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Composing&#123;"</span> +</span><br><span class="line">                <span class="string">"id="</span> + id +</span><br><span class="line">                <span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr8god</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/4/16</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@time</span> 21:52</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ReferenceCounting</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Shared shared = <span class="keyword">new</span> Shared();</span><br><span class="line">        Composing[] composing = &#123; </span><br><span class="line">                <span class="keyword">new</span> Composing(shared),</span><br><span class="line">                <span class="keyword">new</span> Composing(shared),</span><br><span class="line">                <span class="keyword">new</span> Composing(shared),</span><br><span class="line">                <span class="keyword">new</span> Composing(shared),</span><br><span class="line">                <span class="keyword">new</span> Composing(shared)</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">for</span> (Composing c :</span><br><span class="line">                composing) &#123;</span><br><span class="line">            c.dispose();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这还是一个关于<strong>继承与清理</strong> 的例子，但是它和上一个不同的地方在于<u>这次的代码中<strong>成员对象</strong>存在<strong>与其他一个或多个对象共享</strong>的情况</u>，问题变得复杂起来了。这次就不能简单地调用<strong>dispose()</strong>就能解决了，必须使用<strong>引用计数</strong>来跟踪仍旧访问着共享对象的对象数量。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Creating Shared&#123;id&#x3D;0&#125;</span><br><span class="line">Creating Composing&#123;id&#x3D;0&#125;</span><br><span class="line">Creating Composing&#123;id&#x3D;1&#125;</span><br><span class="line">Creating Composing&#123;id&#x3D;2&#125;</span><br><span class="line">Creating Composing&#123;id&#x3D;3&#125;</span><br><span class="line">Creating Composing&#123;id&#x3D;4&#125;</span><br><span class="line">disposing Composing&#123;id&#x3D;0&#125;</span><br><span class="line">disposing Composing&#123;id&#x3D;1&#125;</span><br><span class="line">disposing Composing&#123;id&#x3D;2&#125;</span><br><span class="line">disposing Composing&#123;id&#x3D;3&#125;</span><br><span class="line">disposing Composing&#123;id&#x3D;4&#125;</span><br><span class="line">Disposing Shared&#123;id&#x3D;0&#125;</span><br><span class="line"></span><br><span class="line">Process finished with exit code 0</span><br></pre></td></tr></table></figure><p>这段代码我分三段来讲</p><h3 id="第一段"><a href="#第一段" class="headerlink" title="第一段"></a>第一段</h3><p>在看任何代码之前，我们都要注意<strong>static</strong>这个关键字，因为它总是在任何代码执行之前而被执行。这里就有这么一行代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">long</span> counter = <span class="number">0</span>;</span><br></pre></td></tr></table></figure><p>主代码中是这一段</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Shared shared = <span class="keyword">new</span> Shared();</span><br></pre></td></tr></table></figure><p>这小小的一段代码直接指向了<strong>Shared</strong>这个类，我们先来看看这个类的代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Shared</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> refcount = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">long</span> counter = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">long</span> id = counter++;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Shared</span><span class="params">()</span></span>&#123;</span><br><span class="line">        print(<span class="string">"Creating "</span> + <span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addRef</span><span class="params">()</span></span>&#123; refcount++; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">dispose</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (--refcount == <span class="number">0</span>)&#123;</span><br><span class="line">            print(<span class="string">"Disposing "</span> + <span class="keyword">this</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Shared&#123;"</span> +</span><br><span class="line">                <span class="string">"id="</span> + id +</span><br><span class="line">                <span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>开始执行代码了首先它先做了两个变量的初始化</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">int</span> refcount = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">long</span> id = counter++;</span><br></pre></td></tr></table></figure><p>这边的变量<strong>refcount</strong>是我们在第三段调用<strong>dispose()</strong>时需要用到的，暂时不看。<br>这里的变量<strong>counter</strong>是我们在第二段正式调用<strong>Create()</strong>时需要用到的，暂时不看。</p><p>接下来，就是第一段的正事了，代码先跑到了<strong>Shared()</strong>方法里，使用<strong>print</strong>方法（过后真正用到该方法，我会贴源码的），方法里的东西有一个是有趣，就是我们在第四章的老朋友<strong>this</strong>了，这边的<strong>this</strong>指的是我们调用它的对象——主函数中的<strong>shared</strong>，哦了，解释完毕。</p><p>看<strong>print</strong>源码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.PrintStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Print</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">(Object obj)</span> </span>&#123;</span><br><span class="line">        System.out.println(obj);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">printnb</span><span class="params">(Object obj)</span> </span>&#123;</span><br><span class="line">        System.out.print(obj);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> PrintStream <span class="title">printf</span><span class="params">(String format, Object... args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> System.out.printf(format, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>但是，接下来<strong>print(this)</strong>会干什么呢？<strong>this</strong>相当于一种低级的类，或者说是一种子类。我们可以看到我们的<strong>this</strong>低级类被强转了，或者叫做<strong>向上转型</strong>。成功的称为上流社会<strong>Object</strong>类了。然后理所应当地调用<strong>toString</strong>方法，只不过我们这边重写了这个方法，于是它就按照我们重写的方法执行了，来到了本地的</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"Shared&#123;"</span> +</span><br><span class="line">            <span class="string">"id="</span> + id +</span><br><span class="line">            <span class="string">'&#125;'</span>;</span><br></pre></td></tr></table></figure><p>中去，最终实现了输出</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Creating Shared&#123;id&#x3D;0&#125;</span><br></pre></td></tr></table></figure><p>光荣使命！！！没想到以前的一个小小的输出就要涉及这么多东西呀，害，太难了。理解上面的内容，你还需要在心中明确这样一点<strong>system.out.println()都是直接调用toString打印的</strong>。</p><h3 id="第二段"><a href="#第二段" class="headerlink" title="第二段"></a>第二段</h3><p>代码的第二段就是持续的执行我主函数中的<strong>Composing</strong>数组了，里边的五个成员，依次进行初始化。输出结果的原理和第一段一样，</p><p>说一下我们先前没有讲的<strong>counter</strong>变量，这个变量的用途就是计数，然后赋值给<strong>id</strong>然后进行输出的时候变得好看一点的操作，over。<strong>counter</strong>会从1变到5，然后赋值给<strong>id</strong>并进行输出</p><p>但是我们在此基础上增加了一个<strong>“心眼”</strong>，我们还使用<strong>addRef()</strong>方法。该方法的作用就是使咱们的<strong>refcount</strong>凑效，使其开始赋值，从0到5，然后以备我们第三段代码中被用到。</p><p>关于<strong>addRef()</strong>方法，我这边还有点话要说。<br><strong>Composing</strong>类的构造函数和<strong>Shared</strong>类的构造函数出现了一丢丢区别。我们看代码</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Composing</span><span class="params">(Shared shared)</span></span>&#123;</span><br><span class="line">    print(<span class="string">"Creating "</span> + <span class="keyword">this</span>);</span><br><span class="line">    <span class="keyword">this</span>.shared = shared;</span><br><span class="line">    <span class="keyword">this</span>.shared.addRef();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这边涉及到我们的<strong>this</strong>知识，是关于我<strong>this</strong>的第二种用法，<strong>在构造器中调用构造器</strong>。方法的具体实现是这样子的，<br>首先，由于没有继承关系，我们在<strong>Composing</strong>中设了一个<strong>Shared</strong>的对象。然后该对象就到了我们的构造方法中了<br>然后，我们可以看到我们在构造方法中，是这样调用<strong>Shared</strong>的<strong>addRef</strong>方法的。我们先把传进来的<strong>Shared</strong>赋值给我们的<strong>this.shared</strong>于是把传进来的<strong>Shared</strong>与之前特意设立的<strong>Shared</strong>通过<strong>this</strong>联系在一起。<br>接下来，我们就这样的使用<strong>引用的引用</strong>最终用我们在主函数中的<strong>shared</strong>对象使用了远在天边近在眼前的<strong>Shared</strong>类中的<strong>addRef()</strong>方法，对，你没有听错，就是这样，这就很<strong>Java</strong>——一步一步调用类中的对象，再用对象调用方法，如果中间有一步因为某些原因断掉了，那就很抱歉，就无法实现目标（调用方法）了。</p><p>好啦好啦，当我们运行完所有的第二段代码后，我们会得到一个计数为5的<strong>refcount</strong>变量，以及下面的输出：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Creating Composing&#123;id&#x3D;0&#125;</span><br><span class="line">Creating Composing&#123;id&#x3D;1&#125;</span><br><span class="line">Creating Composing&#123;id&#x3D;2&#125;</span><br><span class="line">Creating Composing&#123;id&#x3D;3&#125;</span><br><span class="line">Creating Composing&#123;id&#x3D;4&#125;</span><br></pre></td></tr></table></figure><h3 id="第三段"><a href="#第三段" class="headerlink" title="第三段"></a>第三段</h3><p>第三段就没啥讲的了，重要的概念理解前两段都讲完了，这边就是单独又引用了一个<strong>dispose</strong>方法。然后输出了，平平无奇！</p><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>对了，对了，在将一个共享对象附着到类上时，必须记得调用<strong>addRef()</strong>但是<strong>disposing()</strong>将跟踪引用数<strong>refcount</strong>，并决定何时执行清理。使用这种技巧需要加倍地细心，但是如果你正在共享需要清理的对象，那么你就会陷入很麻烦的境地，就更要细心了。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;多态&quot;&gt;&lt;a href=&quot;#多态&quot; class=&quot;headerlink&quot; title=&quot;多态&quot;&gt;&lt;/a&gt;多态&lt;/h1&gt;&lt;h2 id=&quot;8-3-1-构造器与多态之构造器的创建顺序&quot;&gt;&lt;a href=&quot;#8-3-1-构造器与多态之构造器的创建顺序&quot; class=&quot;he
      
    
    </summary>
    
    
      <category term="技术" scheme="https://mr8god.cn/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="Java日记" scheme="https://mr8god.cn/tags/Java%E6%97%A5%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>Java深耕——自动装箱拆箱机制</title>
    <link href="https://mr8god.cn/2020/04/15/Java/Java%E6%B7%B1%E8%80%95/Java%E6%B7%B1%E8%80%95%E2%80%94%E2%80%94%E8%A3%85%E7%AE%B1%E6%8B%86%E7%AE%B1%E6%9C%BA%E5%88%B6/"/>
    <id>https://mr8god.cn/2020/04/15/Java/Java%E6%B7%B1%E8%80%95/Java%E6%B7%B1%E8%80%95%E2%80%94%E2%80%94%E8%A3%85%E7%AE%B1%E6%8B%86%E7%AE%B1%E6%9C%BA%E5%88%B6/</id>
    <published>2020-04-15T13:33:29.000Z</published>
    <updated>2020-04-16T14:09:39.497Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Java深耕——在深入理解Java自动装箱拆箱机制"><a href="#Java深耕——在深入理解Java自动装箱拆箱机制" class="headerlink" title="Java深耕——在深入理解Java自动装箱拆箱机制"></a>Java深耕——在深入理解Java自动装箱拆箱机制</h1><h2 id="自动装箱与拆箱的定义"><a href="#自动装箱与拆箱的定义" class="headerlink" title="自动装箱与拆箱的定义"></a>自动装箱与拆箱的定义</h2><p>装箱就是自动将基本数据类型转换为包装器类型；拆箱就是，自动将包装器类型转换为基本数据类型</p><p>Java中的数据类型分为两类：一类是基本数据类型，另一类是引用数据类型</p><p><img src="https://i.loli.net/2020/04/15/FseJUGTZ628OwoV.jpg" alt="基本数据类型的分类.jpg"></p><div class="table-container"><table><thead><tr><th style="text-align:center">简单类型</th><th style="text-align:center">二进制位数</th><th style="text-align:center">封装器类</th></tr></thead><tbody><tr><td style="text-align:center">int</td><td style="text-align:center">32</td><td style="text-align:center">Integer</td></tr><tr><td style="text-align:center">byte</td><td style="text-align:center">8</td><td style="text-align:center">Byte</td></tr><tr><td style="text-align:center">long</td><td style="text-align:center">64</td><td style="text-align:center">Long</td></tr><tr><td style="text-align:center">float</td><td style="text-align:center">32</td><td style="text-align:center">Float</td></tr><tr><td style="text-align:center">double</td><td style="text-align:center">64</td><td style="text-align:center">double</td></tr><tr><td style="text-align:center">char</td><td style="text-align:center">16</td><td style="text-align:center">Character</td></tr><tr><td style="text-align:center">boolean</td><td style="text-align:center">1</td><td style="text-align:center">Boolean</td></tr></tbody></table></div><h2 id="上自动装箱代码"><a href="#上自动装箱代码" class="headerlink" title="上自动装箱代码"></a>上自动装箱代码</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">        <span class="keyword">int</span> a=<span class="number">3</span>;</span><br><span class="line">        <span class="comment">//定义一个基本数据类型的变量a赋值3</span></span><br><span class="line">        Integer b=a;</span><br><span class="line">        <span class="comment">//b是Integer 类定义的对象，直接用int 类型的a赋值    </span></span><br><span class="line">        System.out.println(b);</span><br><span class="line">        <span class="comment">//打印结果为3</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>上面代码中的Integer b = a;就是我们所说的自动装箱的过程，上面代码在执行的时候调用了Integer.valueOf(int i)方法简化后的代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Integer <span class="title">valueOf</span><span class="params">(<span class="keyword">int</span> i)</span> </span>&#123;       </span><br><span class="line">        <span class="keyword">if</span> (i &gt;= -<span class="number">128</span> &amp;&amp; i &lt;= <span class="number">127</span>)</span><br><span class="line">            <span class="keyword">return</span> IntegerCache.cache[i + <span class="number">127</span>];</span><br><span class="line">            <span class="comment">//如果i的值大于-128小于127则返回一个缓冲区中的一个Integer对象</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Integer(i);</span><br><span class="line">        <span class="comment">//否则返回 new 一个Integer 对象</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>可以看到Integer.valueOf(a)其实是返回了一个Integer的对象。因此由于自动装箱的存在Integer b = a这段代码是没有问题的，并且我们可以简化的来这样写：Integer b = 3;</p><p>同样也等价于这样写：Integer b = Integer.valueOf(3)。</p><h2 id="上自动拆箱代码"><a href="#上自动拆箱代码" class="headerlink" title="上自动拆箱代码"></a>上自动拆箱代码</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line"></span><br><span class="line">        Integer b=<span class="keyword">new</span> Integer(<span class="number">3</span>);</span><br><span class="line">        <span class="comment">//b为Integer的对象</span></span><br><span class="line">        <span class="keyword">int</span> a=b;</span><br><span class="line">        <span class="comment">//a为一个int的基本数据类型</span></span><br><span class="line">        System.out.println(a);</span><br><span class="line">        <span class="comment">//打印输出3。</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>上面有一个：int a = b;  代码中把一个对象赋给了基本类型。其实这就等于int a = b.intValue()。</p><p>根据源码中可知道intValue是什么</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">intValue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>这个方法就是返回了value值嘛，但是这里的value又是怎么一回事呢？继续找源码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Integer</span><span class="params">(<span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.value = value;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>原来这里的value就是，Integer后边括号里的值呀，于是我们的拆箱代码其实本质上是这样写的：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line"></span><br><span class="line">        Integer b=<span class="keyword">new</span> Integer(<span class="number">3</span>);</span><br><span class="line">        <span class="comment">//b为Integer的对象</span></span><br><span class="line">        <span class="keyword">int</span> a=b.intValue();</span><br><span class="line">        <span class="comment">//其中b.intValue()返回实例化b时构造函数new Integer(3);赋的值3。</span></span><br><span class="line">        System.out.println(a);</span><br><span class="line">        <span class="comment">//打印输出3。</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="范围概念"><a href="#范围概念" class="headerlink" title="范围概念"></a>范围概念</h2><p>这里边是一个挺重要的知识点，至少我之前看的疯狂Java视频资料，以及我看的《Java编程思想》这本书，都有这方面的介绍。先看一个代码哈：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Integer a = <span class="number">1000</span>,b=<span class="number">1000</span>;</span><br><span class="line">Integer c=<span class="number">100</span>,d=<span class="number">100</span>;</span><br><span class="line">System.out.println(a==b);</span><br><span class="line">System.out.println(c==d);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>原本我会以为是输出的是：true    true啦，但是实际上不对，正确答案是false    true。为甚呢？细细道来。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;        </span><br><span class="line">        <span class="comment">//1</span></span><br><span class="line">        Integer a=<span class="keyword">new</span> Integer(<span class="number">123</span>);</span><br><span class="line">        Integer b=<span class="keyword">new</span> Integer(<span class="number">123</span>);</span><br><span class="line">        System.out.println(a==b);<span class="comment">//输出 false</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2 </span></span><br><span class="line">        Integer c=<span class="number">123</span>;</span><br><span class="line">        Integer d=<span class="number">123</span>;  </span><br><span class="line">        System.out.println(c==d);<span class="comment">//输出 true</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//3</span></span><br><span class="line">        Integer e=<span class="number">129</span>;</span><br><span class="line">        Integer f=<span class="number">129</span>;</span><br><span class="line">        System.out.println(e==f);<span class="comment">//输出 false</span></span><br><span class="line">        <span class="comment">//4</span></span><br><span class="line">        <span class="keyword">int</span> g=<span class="number">59</span>;</span><br><span class="line">        Integer h=<span class="keyword">new</span> Integer(<span class="number">59</span>);</span><br><span class="line">        System.out.println(g==h);<span class="comment">//输出 true</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2020/04/15/JAFCoyUKmtDWNn4.jpg" alt="常量池.jpg"></p><p>第一部分输出false，很好理解，因为比较的是堆中指向的对象是不是同一个嘛，a,b是栈中对象的引用分别指向堆中的两个不同的对象。而a==b这条语句就是判断a、b在堆中指向的对象是不是统一个，因此输出为false。</p><p>第二部分输出true也很好理解，正是用了我们的自动装箱技术</p><p>我带大家这次仔细的看自动装箱的源码</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Integer <span class="title">valueOf</span><span class="params">(<span class="keyword">int</span> i)</span> </span>&#123;       </span><br><span class="line">        <span class="keyword">if</span> (i &gt;= -<span class="number">128</span> &amp;&amp; i &lt;= <span class="number">127</span>)</span><br><span class="line">            <span class="keyword">return</span> IntegerCache.cache[i + <span class="number">127</span>];</span><br><span class="line">            <span class="comment">//如果i的值大于-128小于127则返回一个缓冲区中的一个Integer对象</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Integer(i);</span><br><span class="line">        <span class="comment">//否则返回 new 一个Integer 对象</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>上面的代码中：IntegerCache.cache[i + 127];   表示狠眼生，继续看代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">IntegerCache</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">static</span> <span class="keyword">final</span> Integer cache[];</span><br><span class="line">        <span class="comment">//定义一个Integer类型的数组且数组不可变</span></span><br><span class="line">        <span class="keyword">static</span> &#123;  </span><br><span class="line">        <span class="comment">//利用静态代码块对数组进行初始化。                     </span></span><br><span class="line">            cache = <span class="keyword">new</span> Integer[<span class="number">256</span>];</span><br><span class="line">            <span class="keyword">int</span> j = -<span class="number">128</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; cache.length; k++)</span><br><span class="line">                cache[k] = <span class="keyword">new</span> Integer(j++);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//cache[]原来是一个Integer 类型的数组（也可以称为常量池），value 从-128到127，</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Integer <span class="title">valueOf</span><span class="params">(<span class="keyword">int</span> i)</span> </span>&#123;   </span><br><span class="line">        <span class="keyword">if</span> (i &gt;=-<span class="number">128</span> &amp;&amp; i &lt;= <span class="number">127</span>)        </span><br><span class="line">            <span class="keyword">return</span> IntegerCache.cache[i + (-IntegerCache.low)];</span><br><span class="line">            <span class="comment">//如果装箱时值在-128到127之间，之间返回常量池中的已经初始化后的Integer对象。</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Integer(i);</span><br><span class="line">        <span class="comment">//否则返回一个新的对象。</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>原来IntegerCache类在初始化的时候，生成了一个大小为256的integer类型的常量池，并且integer.val的值从-128~127，当我们运行Integer c = a（临时做的一个小栗子哈）的时候，如果-128 &lt;= a &lt;= 127，就不会再生成新的integer对象。于是我们第二部分的c和d指向的是同一个对象，所以比较的时候是相等的，所以我们输出true。</p><p>第三部分，理解如第二部分</p><p>第四部分：代码中g指向的是栈中的变量，h指向的是堆中的对象，但是我们的g == h为什么还是true呢？这就是<strong>自动插箱</strong>干的好事，g == h这代码执行的时候就是：g == h.IntValue()，而h.IntValue()=59，所以两边其实是两个int在比较而已。</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>简单一句话：</p><p><strong>装箱</strong>就是自动将基本数据类型转换为包装器类型；</p><p><strong>拆箱</strong>就是自动将包装器类型转换为基本数据类型。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Java深耕——在深入理解Java自动装箱拆箱机制&quot;&gt;&lt;a href=&quot;#Java深耕——在深入理解Java自动装箱拆箱机制&quot; class=&quot;headerlink&quot; title=&quot;Java深耕——在深入理解Java自动装箱拆箱机制&quot;&gt;&lt;/a&gt;Java深耕——在深入
      
    
    </summary>
    
    
      <category term="技术" scheme="https://mr8god.cn/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="Java深耕" scheme="https://mr8god.cn/tags/Java%E6%B7%B1%E8%80%95/"/>
    
  </entry>
  
  <entry>
    <title>Java深耕——第四章之this关键字</title>
    <link href="https://mr8god.cn/2020/04/14/Java/Java%E6%B7%B1%E8%80%95/Java%E6%B7%B1%E8%80%95%E2%80%94%E2%80%94%E7%AC%AC%E5%9B%9B%E7%AB%A0%E4%B9%8Bthis%E5%85%B3%E9%94%AE%E5%AD%97/"/>
    <id>https://mr8god.cn/2020/04/14/Java/Java%E6%B7%B1%E8%80%95/Java%E6%B7%B1%E8%80%95%E2%80%94%E2%80%94%E7%AC%AC%E5%9B%9B%E7%AB%A0%E4%B9%8Bthis%E5%85%B3%E9%94%AE%E5%AD%97/</id>
    <published>2020-04-14T07:49:15.000Z</published>
    <updated>2020-04-14T15:15:53.321Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Java深耕——第四章之this关键字"><a href="#Java深耕——第四章之this关键字" class="headerlink" title="Java深耕——第四章之this关键字"></a>Java深耕——第四章之this关键字</h1><p>本文灵感来源于知乎文章（<a href="https://zhuanlan.zhihu.com/p/62779357）" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/62779357）</a><br>以及《Java编程思想》P85页</p><h2 id="使用this关键字之前"><a href="#使用this关键字之前" class="headerlink" title="使用this关键字之前"></a>使用this关键字之前</h2><p>Java提供了一个叫做<strong>this</strong>关键字，<strong>this</strong>关键字总是指向调用该方法的对象。根据this出现的位置不同，this作为对象的默认引用有两种情况。</p><ol><li>构造器中引用该构造器正在初始化的对象</li><li>在方法中引用调用该方法的对象</li></ol><h2 id="在方法中引用调用该方法的对象"><a href="#在方法中引用调用该方法的对象" class="headerlink" title="在方法中引用调用该方法的对象"></a>在方法中引用调用该方法的对象</h2><h3 id="代码示例"><a href="#代码示例" class="headerlink" title="代码示例"></a>代码示例</h3><p>那我们直接上了概念，肯定是不能够被大家理解的哈，我们转念换个角度来想一想，我们如果没有<strong>this</strong>关键字，会面临一个什么样子的情况呢？</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="comment">//定义一个move()方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">move</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"正在执行move()方法"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//定义一个eat()方法，eat()方法需要借助move()方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Person p = <span class="keyword">new</span> Person();</span><br><span class="line">        p.move();</span><br><span class="line">        System.out.println(<span class="string">"正在执行eat()方法"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//创建Person对象</span></span><br><span class="line">        Person p = <span class="keyword">new</span> Person();</span><br><span class="line">        <span class="comment">//调用Person的eat()方法</span></span><br><span class="line">        p.eat();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 代码来源于：https://zhuanlan.zhihu.com/p/62779357</span></span><br></pre></td></tr></table></figure><p>运行结果为：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">正在执行move()方法</span><br><span class="line">正在执行eat()方法</span><br></pre></td></tr></table></figure><h3 id="代码讲解"><a href="#代码讲解" class="headerlink" title="代码讲解"></a>代码讲解</h3><p>上述的方式确实能够做到eat()方法里调用move()方法，但是我们在main()方法里可以看到我们总共创建了两个对象：main()方法里创建了一个对象；eat()方法里创建了一个对象。但是实际上我们是不需要两个对象的，因为在程序调用第一个eat()方法时一定会提供一个Person对象，而不需要重新创建一个Person了。</p><p>因此我们可以通过<strong>this</strong>关键字在eat()方法中获得调用该方法的对象。<strong>this</strong>关键字只能在方法内部使用，表示对”调用方法的那个对象“的引用。</p><p>于是上面的代码Person类中的eat()方法改为下面这种方式较为合适：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定义一个eat()方法，eat()方法需要借助move()方法</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">//使用this引用调用eat()方法的对象</span></span><br><span class="line">    <span class="keyword">this</span>.move();</span><br><span class="line">    System.out.println(<span class="string">"正在执行eat()方法"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>不过呢，虽然接下来要说的，可能会让读者同学感觉我是在耍你哈。但是可不是哦，上面这么多我只是做个引子而已，用来引导大家的。我先说我要说的知识点吧</p><p><strong>this</strong>关键字的用法和其他对象引用并无不同。但是如果要在方法内部调用同一个类的另一个方法，就不必使用this，直接调用即可。当前方法的this引用会自动应用用途同一类中的其他方法。所以上述代码也可以这样写：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定义一个eat()方法，eat()方法需要借助move()方法</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>&#123;</span><br><span class="line">    move();</span><br><span class="line">    System.out.println(<span class="string">"正在执行eat()方法"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>整体代码可以如下</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.mr8god.example;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr8god</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/4/14</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@time</span> 16:09</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">move</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"正在执行move()方法"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>&#123;</span><br><span class="line">        move();</span><br><span class="line">        System.out.println(<span class="string">"正在执行eat()方法"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Person p = <span class="keyword">new</span> Person();</span><br><span class="line">        p.eat();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>暂时的小总结</strong>：</p><p>​        在eat()方法内部，你可以写this.move()，但无此必要。编译器能够帮你自动添加。只有当明确指出对当前对象的引用时，才需要使用<strong>this</strong>关键字。例如，当需要返回对当前对象的引用的时候，就常常在return语句里这样写：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.mr8god.chapterfive;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr8god</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/4/14</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@time</span> 11:18</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Leaf</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="function">Leaf <span class="title">increment</span><span class="params">()</span></span>&#123;</span><br><span class="line">        i++;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"i = "</span> + i);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Leaf x = <span class="keyword">new</span> Leaf();</span><br><span class="line">        x.increment().increment().increment().print();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>代码中，由于increment()通过<strong>this</strong>关键字返回了对当前对象的引用，所以很容易就可以在一条语句里对同一个对象执行多次操作。</p><p><strong>this</strong>关键字对于将当前对象传递给其他方法也很有用</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.mr8god.chapterfive;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr8god</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/4/14</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@time</span> 11:21</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">(Apple apple)</span></span>&#123;</span><br><span class="line">        Apple peeled = apple.getPeeled();</span><br><span class="line">        System.out.println(<span class="string">"Yummy"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Peeler</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> Apple <span class="title">peel</span><span class="params">(Apple apple)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> apple;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Apple</span></span>&#123;</span><br><span class="line">    <span class="function">Apple <span class="title">getPeeled</span><span class="params">()</span></span>&#123; <span class="keyword">return</span> Peeler.peel(<span class="keyword">this</span>); &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PassingThis</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> Person().eat(<span class="keyword">new</span> Apple());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>Apple</strong>需要调用<strong>Peeler.peel()</strong>方法，这个方法是一个外部的工具方法，将执行由于某种原因而必须放在<strong>Apple</strong>外部的操作。为了将其自身传递给外部方法，<strong>Apple</strong>必须使用<strong>this</strong>关键字。</p><h2 id="在构造器中调用构造器"><a href="#在构造器中调用构造器" class="headerlink" title="在构造器中调用构造器"></a>在构造器中调用构造器</h2><p>另一种情形是：<strong>this</strong>关键字可以用于构造器中作为默认引用，由于构造器是直接使用<strong>new</strong>关键字来调用的，而不是使用对象来调用的，所以<strong>this</strong>在构造器中代表该构造器正在初始化的对象。</p><h3 id="例一"><a href="#例一" class="headerlink" title="例一"></a>例一</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.mr8god.example;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr8god</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/4/14</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@time</span> 17:05</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> age;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> age = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">this</span>.age = <span class="number">3</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="keyword">new</span> Person().age);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>与普通方法类似，大部分时候，我们在构造器中访问其他成员变量和方法时都可以省略<strong>this</strong>前缀，但是如果构造器中有一个与成员变量同名的局部变量，又必须在构造器中访问这个被覆盖的成员变量，则必须使用<strong>this</strong>前缀。正如上面的程序所示。</p><p>当<strong>this</strong>作为对象的默认引用使用时，程序可以像访问普通引用变量一样来访问这个<strong>this</strong>引用，甚至可以把<strong>this</strong>当成普通方法的返回值。如下面的程序</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> age;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Person <span class="title">grow</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        age ++;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Person p = <span class="keyword">new</span> Person();</span><br><span class="line">        <span class="comment">//可以连续调用同一个方法</span></span><br><span class="line">        p.grow().grow().grow();</span><br><span class="line">        System.out.println(<span class="string">"p对象的age的值是："</span>+p.age);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>运行结果为：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">p对象的age的值是：3</span><br></pre></td></tr></table></figure><p>上面的代码中可以看到，如果在某个方法中把this作为返回值，则可以多次连续调用同一个方法，从而使得代码变得更加的简洁。</p><h3 id="例二"><a href="#例二" class="headerlink" title="例二"></a>例二</h3><p>有时候为一个类写了多个构造器，我们可能想在一个构造器中调用另一个构造器，以避免重复代码。可以使用<strong>this</strong>关键字做到这一点。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.mr8god.chapterfive;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> net.mindview.util.Print.print;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr8god</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/4/14</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@time</span> 11:31</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Flower</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> petalCount = <span class="number">0</span>;</span><br><span class="line">    String s = <span class="string">"initial value"</span>;</span><br><span class="line">    Flower(<span class="keyword">int</span> petals)&#123;</span><br><span class="line">        petalCount = petals;</span><br><span class="line">        print(<span class="string">"Constructor w/ int arg only, petalCount= "</span></span><br><span class="line">        + petalCount);</span><br><span class="line">    &#125;</span><br><span class="line">    Flower(String ss)&#123;</span><br><span class="line">        print(<span class="string">"Constructor w/ String arg only, s = "</span> + ss);</span><br><span class="line">        s = ss;</span><br><span class="line">    &#125;</span><br><span class="line">    Flower(String s, <span class="keyword">int</span> petals)&#123;</span><br><span class="line">        <span class="keyword">this</span>(petals);</span><br><span class="line">        <span class="keyword">this</span>.s = s;</span><br><span class="line">        print(<span class="string">"String &amp; int args"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    Flower()&#123;</span><br><span class="line">        <span class="keyword">this</span>(<span class="string">"hi"</span>, <span class="number">47</span>);</span><br><span class="line">        print(<span class="string">"default constructor (no args)"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">printPetalCount</span><span class="params">()</span></span>&#123;</span><br><span class="line">        print(<span class="string">"petalCount = "</span> + petalCount + <span class="string">" s = "</span> + s);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Flower x = <span class="keyword">new</span> Flower(<span class="string">"江晨玥"</span>,<span class="number">222</span>);</span><br><span class="line"><span class="comment">//        Flower x = new Flower();</span></span><br><span class="line">        x.printPetalCount();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这串代码如果给初学者看的话，会有一点不明确的地方，毕竟代码太长了嘛，这边给个建议，就只看我们的this指针部分哦！</p><p>然后代码中，我选择初始化了一个Flower(“江晨玥”, 222)的方法，首先这行代码会被用到上面的Flower(String s, int petals)里边，很好的实现了方法的重载嘛。然后我们就可以直观地看到这边，我讲解几个可能会有疑问的地方哈</p><h4 id="可能会有疑问一"><a href="#可能会有疑问一" class="headerlink" title="可能会有疑问一"></a>可能会有疑问一</h4><p>这边</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Flower(String s, <span class="keyword">int</span> petals)&#123;</span><br><span class="line">        <span class="keyword">this</span>(petals);</span><br><span class="line">        <span class="keyword">this</span>.s = s;</span><br><span class="line">        print(<span class="string">"String &amp; int args"</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>代码中的this(petals)到底是怎么一回事，其实有这个疑问还是要算你的<strong>this</strong>关键字没有理解到家，this其实在这里指的是Flower，相当于我在这个Flower(String s, int petals)里引用了Flower(int petals)方法。</p><h4 id="可能会有疑问二"><a href="#可能会有疑问二" class="headerlink" title="可能会有疑问二"></a>可能会有疑问二</h4><p>这边的this.s = s，可能也会有疑问，其实这个也展示了this的另外一种用法。由于参数s的名称和数据成员s的名字相同，所以会很容易产生歧义。使用<strong>this.s</strong>就可以来代表数据成员解决这个问题。Java日常编程经常会这样的哦</p><h4 id="讲解一"><a href="#讲解一" class="headerlink" title="讲解一"></a>讲解一</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">printPetalCount()</span><br></pre></td></tr></table></figure><p>方法表明，除构造器之外，编译器禁止在其他任何方法中调用构造器，不信？你可以试试！</p><h2 id="Over！"><a href="#Over！" class="headerlink" title="Over！"></a>Over！</h2>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Java深耕——第四章之this关键字&quot;&gt;&lt;a href=&quot;#Java深耕——第四章之this关键字&quot; class=&quot;headerlink&quot; title=&quot;Java深耕——第四章之this关键字&quot;&gt;&lt;/a&gt;Java深耕——第四章之this关键字&lt;/h1&gt;&lt;p&gt;本文
      
    
    </summary>
    
    
      <category term="技术" scheme="https://mr8god.cn/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="Java" scheme="https://mr8god.cn/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>博客文章组织结构图解</title>
    <link href="https://mr8god.cn/2020/04/12/%E5%8D%9A%E5%AE%A2%E6%96%87%E7%AB%A0%E7%BB%84%E7%BB%87%E7%BB%93%E6%9E%84%E5%9B%BE%E8%A7%A3/"/>
    <id>https://mr8god.cn/2020/04/12/%E5%8D%9A%E5%AE%A2%E6%96%87%E7%AB%A0%E7%BB%84%E7%BB%87%E7%BB%93%E6%9E%84%E5%9B%BE%E8%A7%A3/</id>
    <published>2020-04-12T05:21:45.000Z</published>
    <updated>2020-04-12T05:43:17.147Z</updated>
    
    <content type="html"><![CDATA[<h2 id="本博客文章组织结构图（分类篇）"><a href="#本博客文章组织结构图（分类篇）" class="headerlink" title="本博客文章组织结构图（分类篇）"></a>本博客文章组织结构图（分类篇）</h2><p><img src="https://i.loli.net/2020/04/12/acgHqINPdTx298w.png" alt="Mr8god博客文章组织结构图（分类篇）.png"></p><h2 id="本博客文章组织结构图（标签篇）"><a href="#本博客文章组织结构图（标签篇）" class="headerlink" title="本博客文章组织结构图（标签篇）"></a>本博客文章组织结构图（标签篇）</h2><p><img src="https://i.loli.net/2020/04/12/OPf6VKuyH5DLwFU.png" alt="Mr8god博客文章组织结构图（标签篇）.png"></p><h2 id="2020年4月12日13-42发布"><a href="#2020年4月12日13-42发布" class="headerlink" title="2020年4月12日13:42发布"></a>2020年4月12日13:42发布</h2><h2 id="未完待续……"><a href="#未完待续……" class="headerlink" title="未完待续……"></a>未完待续……</h2>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;本博客文章组织结构图（分类篇）&quot;&gt;&lt;a href=&quot;#本博客文章组织结构图（分类篇）&quot; class=&quot;headerlink&quot; title=&quot;本博客文章组织结构图（分类篇）&quot;&gt;&lt;/a&gt;本博客文章组织结构图（分类篇）&lt;/h2&gt;&lt;p&gt;&lt;img src=&quot;https://
      
    
    </summary>
    
    
      <category term="建站那些事儿" scheme="https://mr8god.cn/categories/%E5%BB%BA%E7%AB%99%E9%82%A3%E4%BA%9B%E4%BA%8B%E5%84%BF/"/>
    
    
      <category term="hexo_Next" scheme="https://mr8god.cn/tags/hexo-Next/"/>
    
  </entry>
  
  <entry>
    <title>可持续集成（CI）</title>
    <link href="https://mr8god.cn/2020/04/11/%E5%BB%BA%E7%AB%99%E9%82%A3%E4%BA%9B%E4%BA%8B%E5%84%BF/%E5%8F%AF%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90%EF%BC%88CI%EF%BC%89/"/>
    <id>https://mr8god.cn/2020/04/11/%E5%BB%BA%E7%AB%99%E9%82%A3%E4%BA%9B%E4%BA%8B%E5%84%BF/%E5%8F%AF%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90%EF%BC%88CI%EF%BC%89/</id>
    <published>2020-04-11T07:49:15.000Z</published>
    <updated>2020-04-14T15:51:09.482Z</updated>
    
    <content type="html"><![CDATA[<h1 id="可持续集成（CI）的学习"><a href="#可持续集成（CI）的学习" class="headerlink" title="可持续集成（CI）的学习"></a>可持续集成（CI）的学习</h1><p>这是一种基于github托管平台的工具类系统，我们以Travis CI来讲这一项技术的实现。</p><h2 id="什么是Continuous-Integration-CI-呢？"><a href="#什么是Continuous-Integration-CI-呢？" class="headerlink" title="什么是Continuous Integration(CI)呢？"></a>什么是Continuous Integration(CI)呢？</h2><p>这是一种在小周期内寻求经常合并代码的一种模式。<br>与此相对的就是，在一个大的开发周期结束后进行合并的另一种模式。</p><p>CI的目标就是以较小的增量开发，一点点的增加自己的代码和经常性的测试，从而构建更加稳定和优秀的软件开发。</p><p>​        Travis CI通过自动化生成并且测试代码的改变来实现对我们开发进程的一种帮助。而且如果成功实现了改变，它还能够提供实时的反馈。</p><p>​        Travis CI也能在你的程序开发中的其他部分提供帮助，通过<strong>管理部署</strong>和<strong>通知</strong></p><h2 id="CI的构建以及自动化：Building，Testing，Deploying"><a href="#CI的构建以及自动化：Building，Testing，Deploying" class="headerlink" title="CI的构建以及自动化：Building，Testing，Deploying"></a>CI的构建以及自动化：Building，Testing，Deploying</h2><p>​        当你使用了Build的功能后，Travis CI将会从你的github仓库拉下你的代码，并把它放在一个全新的虚拟环境中。然后执行一系列的build命令进而test你的代码。</p><p>​        如果你的代码test没通过，那么build将会被认为是失败了的；相反如果通过了，build就是成功的，系统便会将代码部署到你想让它部署的地方去。</p><p>​        CI build可以自动化你的动作流的其他部分。这就意味着你可以使你的任务和其它的一些部分相互依赖起来，通过Build Stages，设置notifications，准备deployments在你build之后或者更多其他的任务之后的方法。</p><h2 id="Builds，Jobs，Stages-and-Phases"><a href="#Builds，Jobs，Stages-and-Phases" class="headerlink" title="Builds，Jobs，Stages and Phases"></a>Builds，Jobs，Stages and Phases</h2><p>这里是对上面几个名词的解释</p><ul><li>phase - 这是指一种继往开来的工作模式。举个例子，我们首先要做好deploy部署好阶段，然后我们才关注script阶段，最后我们才能够实现install阶段。</li><li>job - 一种自动化的进程就是一个job，我举一个例子哈，我们从我们的远程仓库将代码clone下来，clone到一个虚拟环境中去，接下来我们开始执行一系列的阶段比如说编译代码、跑代码测试等等。当然如果我们的job中有一个步骤出现了错误，那么我们的script阶段就会向我们返回一个值来报错。</li><li>build - 一组jobs。举个例子，一个build命令下可能会有2个jobs，每个jobs都会用各自适合的编程语言来进行测试项目。一个build的完成，也就意味着它的jobs都被成功完成了。</li><li>stage - 由多个阶段组成的顺序生成过程的一部分并行运行，就称为一组作业</li></ul><h2 id="Breaking-the-Build"><a href="#Breaking-the-Build" class="headerlink" title="Breaking the Build"></a>Breaking the Build</h2><p>当满足一下条件的时候，我们就认为build已经损坏了。（比如说一个或多个作业完成且状态未通过时：</p><ul><li>errored - 我们在before_install，install， before_script阶段输错了命令导致返回了一串错误代码。这个job就会立刻停止。</li><li>failed - 在script阶段的一个命令导致返回了错误代码。这个job会继续跑知道它完成了它的工作。</li><li>canceled - 管理员取消了job</li></ul><h2 id="Infrastructure-and-Environment-Notes"><a href="#Infrastructure-and-Environment-Notes" class="headerlink" title="Infrastructure and Environment Notes"></a>Infrastructure and Environment Notes</h2><p>对于不同的操作系统，有不同的要求</p><ul><li>Linux - 以后有用再去官方文档查</li><li>macos - 同上</li><li>Windows - 系统版本在1803以上。</li></ul><p>Travis CI是在软件开发领域中的一个在线的、分布式的持续集成服务，用来测试在github托管的代码的。好吧上面所有的build可以替换成构建。</p><h2 id="开始讲解Travis-CI和github-page运行机制原理"><a href="#开始讲解Travis-CI和github-page运行机制原理" class="headerlink" title="开始讲解Travis CI和github page运行机制原理"></a>开始讲解Travis CI和github page运行机制原理</h2><p>宝贝们，上面都是我对官方文档的翻译哦，我觉得不是特别妥<br>现在才是最重要的部分，是精髓哦！我花了（让我算算哈，从早上8:15到现在22:53）14个小时38分钟。是真的“有意思哦”！</p><p>闲话少说，开始了</p><p>首先得感谢我桃大佬的概念输出，大概是上上周吧，建议我为了我博客的安全着想，将本地的博客配置文件保存到云端，如果本地的硬盘出了啥问题的话，我们也可以从云端恢复数据，完美的主意！桃大佬给了我可持续集成这一概念的输出。</p><h3 id="概念输出：什么是可持续集成（CI）呢？"><a href="#概念输出：什么是可持续集成（CI）呢？" class="headerlink" title="概念输出：什么是可持续集成（CI）呢？"></a>概念输出：什么是可持续集成（CI）呢？</h3><p>这个网上都能给出正确的解释，这是一种在线托管的持续集成服务，与github是好哥们，当我们用github账号登录了Travis CI（CI的一种）之后，我们就可以看到介家伙上面有所有我们github仓库中的项目。是的呢，就是和github穿一条裤子的呢！我先放图哈！</p><p><img src="https://i.loli.net/2020/04/11/fadAh6GMnswYxkr.jpg" alt="Travis介绍_一_.jpg"></p><p>大家可以从图中很容易的看到，我Mr8god在GitHub上的仓库这边都有。概念我也说了，大致样子也给大家看了，我们开始下一步。</p><h3 id="Travis-CI和GitHub的机制原理"><a href="#Travis-CI和GitHub的机制原理" class="headerlink" title="Travis CI和GitHub的机制原理"></a>Travis CI和GitHub的机制原理</h3><p>先放图，这是我自己做的图解</p><p><img src="https://i.loli.net/2020/04/11/iMrYfkWB2vAwLzh.jpg" alt="Travis CI和GitHub的机制原理.jpg"></p><p>这一张图可以很好的解释哈，我这边也懒得加水印啥的，想拿就拿。</p><p>不管是啥机制，首先的前提是你的思路一定要明确，这也就是为什么网上教程有很多，但是很少有人能够做得出来的原因。大多数人只喜欢找现成的就满足了。但是那些都是治标不治本的玩意儿，真东西还是得往细了研究，以前都觉得那些花里胡哨的东西真好玩，可真等到我玩过了之后才发现，基础才是最重要的东西！！！不禁想到了很多人很早学习了框架……咳咳，不扯远了不扯远不扯远了哈</p><p>我先说一下我的<strong>持续集成思路</strong>哈</p><ul><li>我想到这个的背景：上面也说过了，是我桃大佬提供的（他超棒）。主要是为了解决hexo博客平台无法备份代码源码的问题，因为我如果没有备份的源码，万一我本地的存储系统崩盘了之后，我不就蛋糕了吗？！！！所以现在搭建好这一系统后，如果遇到了本地存储系统崩盘的情况，我们可以从云端（GitHub）上下载代码，实现本地重建。</li><li>我的持续集成思路：我的博客源码存储在GitHub上的一个独立的仓库（上图中的GitHubSource）中，博客hexo自动生成的静态文件又是在另外一个独立的仓库（GitHubgitpage）中，每次我在本地把代码推到我的GitHub仓库之后，Travis就会立刻监听到我仓库发生了变动，这个时候Travis就会采取反制措施，具体我后面再细讲。反制措施会生成原本本地就可以生成的博客网站静态文件，并把文件部署到GitHubPage上面。</li></ul><h4 id="图解："><a href="#图解：" class="headerlink" title="图解："></a>图解：</h4><p>Step1：这一步骤，我是将本地的代码推到GitHub上的GitHubSource仓库中去。<br>Step2：这一步骤得细讲，我们GitHub的好兄弟——Travis在第一时间发现了我存储在GitHubSource仓库里的代码发生了变动（此处就是我Step1中的推代码行为导致的变动，实际生活中也可能是删掉代码之类的其他操作导致的仓库变动），于是它做的第一件事情就是将变动后的代码拉到它自己的虚拟机上，我更愿意将它理解为虚拟机（实际上不是虚拟机哦！）。<br>Step3：虚拟机接下来会检查拉到本地的源码中是否会存在.travis.yml文件，该文件里边就有指示Travis CI本地虚拟机的命令，下面我详解一下该文件哈！现在我们只要知道该命令可以像本地hexo那样将博客源代码进行编译，生成静态文件。<br>Step4：接下来我就要向大家补充或者说巩固一个知识点了：hexo博客平台每一次的hexo三连（hexo c &amp;&amp; hexo g &amp;&amp; hexo d)，最后都只是将博客中的public文件部署（上传）到GitHubPage而已。于是咱们的第四步就是将在Travis CI虚拟机中生成的静态文件上传到我的GitHubPage仓库中去。至此，大功告成！</p><h4 id="travis-yml文件详解"><a href="#travis-yml文件详解" class="headerlink" title=".travis.yml文件详解"></a>.travis.yml文件详解</h4><p>先放上我的文件，可以信赖哦！</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">language:</span> <span class="string">node_js</span></span><br><span class="line"></span><br><span class="line"><span class="attr">node_js:</span> <span class="string">stable</span> <span class="comment"># 要安装的node版本为稳定版</span></span><br><span class="line"></span><br><span class="line"><span class="attr">cache:</span></span><br><span class="line">  <span class="attr">directories:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">node_modules</span> <span class="comment"># 要缓存的文件夹</span></span><br><span class="line"></span><br><span class="line"><span class="attr">install:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">npm</span> <span class="string">install</span></span><br><span class="line"></span><br><span class="line"><span class="attr">script:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">hexo</span> <span class="string">clean</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">hexo</span> <span class="string">g</span></span><br><span class="line"></span><br><span class="line"><span class="attr">after_script:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">cd</span> <span class="string">./public</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">init</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">config</span> <span class="string">user.name</span> <span class="string">"mr8god"</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">config</span> <span class="string">user.mail</span> <span class="string">"17696748602@163.com"</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">add</span> <span class="string">.</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">commit</span> <span class="string">-m</span> <span class="string">"代码使用Travis CI自动部署的哈"</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">push</span> <span class="string">--force</span> <span class="string">--quiet</span> <span class="string">"https://$&#123;blogsource&#125;@$&#123;GH_REF&#125;"</span> <span class="string">master:master</span></span><br><span class="line"></span><br><span class="line"><span class="attr">branches:</span></span><br><span class="line">  <span class="attr">only:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">master</span> <span class="comment"># 触发持续集成的分支。现在我们源码在哪里，这边就填哪一个分支，如果该分支发生变化，那么就会启动travisCI</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">env:</span></span><br><span class="line">  <span class="attr">global:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">GH_REF:</span> <span class="string">github.com/Mr8god/Mr8god.github.io.git</span></span><br></pre></td></tr></table></figure><p>参数讲解：</p><p>-language：指定Travis CI的基本环境语言，我这边选择的是hexo的基本环境原因——nodejs<br>-node_js：选择安装的node版本，对咯对咯，每一次使用Travis CI的虚拟机都会是一幅全新的模样，该虚拟机每一次的操作都需要安装对应的环境。<br>-cache：缓存文件存储的位置<br>-install：这里边我选择了 npm install命令，安装hexo博客平台需要的一些依赖包。<br>-script：脚本行为开始，可以看到我这边是本地很正常的hexo clean和hexo g命令，不做解释哈。执行完这两个行为后，我们会在虚拟机的public文件夹中生成我们需要的静态网页文件。<br>-after_script：如其名，执行完脚本后该干什么呢？这边的一串命令是为了将虚拟机的public文件夹中的静态文件上传到GitHubPage仓库中去，实现部署。<br>-branches：里边填上我们Travis CI所监督的GitHub仓库的分支，只要这个分支出现了代码变动，就会有接下来一波反制措施。<br>-env：介里边是变量。</p><p>综上介绍完了，如果你要用我的配置文件的话，你需要把- git config user.name “mr8god”、 - git config user.mail “17696748602@163.com”、-GH_REF: github.com/Mr8god/Mr8god.github.io.git或者再加上那个分支的内容改一改，改成自己的东西就行了。</p><h4 id="实操"><a href="#实操" class="headerlink" title="实操"></a>实操</h4><p>这个也是挺重要的！</p><p>首先我们在我们的GitHub上建好我用于存放源码的仓库哦！接下来就需要打开GitHub的setting进行GitHub与它好兄弟Travis CI的故事了</p><h5 id="GitHub与Travis-CI进行token绑定"><a href="#GitHub与Travis-CI进行token绑定" class="headerlink" title="GitHub与Travis CI进行token绑定"></a>GitHub与Travis CI进行token绑定</h5><p>首先我们打开我们的GitHub主页面，进入我们的setting里，发现了deployer setting<br><img src="https://i.loli.net/2020/04/11/PjFb6sQqTZG9oil.jpg" alt="实操（一）.jpg"></p><p>我们点进去，接下来会看到下图<br><img src="https://i.loli.net/2020/04/11/jhAyTCIuaJWkFz9.jpg" alt="实操（二）.jpg"></p><p>然后继续点我的红圈<br><img src="https://i.loli.net/2020/04/11/oIJi1XZESlymvGd.jpg" alt="实操（三）.jpg"></p><p>然后继续点我的红圈，我们开始创建token了<br><img src="https://i.loli.net/2020/04/11/S9kTX7opWxKEm6N.jpg" alt="实操（四）.jpg"></p><p>这边我们要记住我们的note，因为接下来在Travis CI页面我们用得上。</p><p><img src="https://i.loli.net/2020/04/11/wDY2qQN63s4Iory.jpg" alt="实操（五）.jpg"></p><p>然后这边的这个值也一定要记住！！！这个时候就该把它复制下来了，因为这个页面只会显示一次，如果你错过了，你就得重来亿遍！</p><p><img src="https://i.loli.net/2020/04/11/DIflmz6WnR78QEq.jpg" alt="实操（六）.jpg"></p><p>接下来，在前一个name的红圈内填上我们的note，后边的value中填上我们刚刚复制的码。就OK了，就实现了这个仓库和我们GitHub仓库的绑定。</p><p>【一个常见的错误】：我们在观测代码变动时，在Travis CI的Build History中可能会遇到不管怎么push，依旧 纹丝不动的情况，这个时候就要注意看看自己的.travis.yml文件是否是完整无缺，没有错误的。</p><h5 id="在博客文件上我们要做些什么呢？"><a href="#在博客文件上我们要做些什么呢？" class="headerlink" title="在博客文件上我们要做些什么呢？"></a>在博客文件上我们要做些什么呢？</h5><p>我们需要在博客文件的根目录下添加我们上面详解的.travis.yml文件，就行了。接下来就是一个容易出错的<strong>重点</strong>了，而且比较难免描述清楚，我尽力用我的语言描述清楚哈。</p><h5 id="如何将本地的hexo博客源码push到GitHub上的source仓库中去"><a href="#如何将本地的hexo博客源码push到GitHub上的source仓库中去" class="headerlink" title="如何将本地的hexo博客源码push到GitHub上的source仓库中去"></a>如何将本地的hexo博客源码push到GitHub上的source仓库中去</h5><p>这个地方是困扰我很久的地方，如果这个地方没有做好的话，我们会面临一个直观的问题，我们部署好之后的网站是一片空白，</p><p>为什么呢？<br>因为我们的渲染文件没有部署上去呀！</p><p>为什么我们的渲染文件没有部署上去呢？<br>因为我们源码中的next主题（hexo的一种博客主题）没有push到我们的云端GitHub的source仓库呀！</p><p>为什么我们的next主题文件会没有push到我们的云端GitHub上的source仓库中去呢？<br>这个就要说到我们当初创建本地博客文件的时候了，那个时候我没有注意一个问题，我直接主题源码仓库把代码pull到本地了，这导致了我们的theme——next文件中本身就有一个初始化过、指向原仓库的git了，这构成了git的一种叫做submodule（子模块，就是git文件中还有一个git文件），</p><p>这会导致什么结果呢？<br>会导致本地的next文件夹无法上传到我们的GitHub源代码仓库中去，<br>进而无法被我们的Travis CI拉到它的虚拟机中去，<br>进而无法生成CSS、js等网站渲染文件，<br>进而出现了我们开头所讲到的一片空白现象。</p><p>这一点提醒了我，日后在pull别人代码的时候，要做分离处理！！！</p><p>那我们该怎么解决呢？</p><p>【解决方法】</p><ol><li>首先我们来到我们的next文件夹（博客目录/themes/next)下，删掉.git和.gitnore文件</li><li>然后cd到我们的themes文件夹目录下，清除缓存。命令是：git rm -r —cached next</li><li>然后就是Git三连了（git add .  、 git commit -m “想说啥说啥”  、 git push)</li><li>完美解决问题，别看这么简单，我花了三小时……</li></ol><h2 id="大功告成，睡了睡了"><a href="#大功告成，睡了睡了" class="headerlink" title="大功告成，睡了睡了"></a>大功告成，睡了睡了</h2><p>有问题联系我江某人哈</p><p>QQ：1803357141</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;可持续集成（CI）的学习&quot;&gt;&lt;a href=&quot;#可持续集成（CI）的学习&quot; class=&quot;headerlink&quot; title=&quot;可持续集成（CI）的学习&quot;&gt;&lt;/a&gt;可持续集成（CI）的学习&lt;/h1&gt;&lt;p&gt;这是一种基于github托管平台的工具类系统，我们以Trav
      
    
    </summary>
    
    
      <category term="建博客那些事儿" scheme="https://mr8god.cn/categories/%E5%BB%BA%E5%8D%9A%E5%AE%A2%E9%82%A3%E4%BA%9B%E4%BA%8B%E5%84%BF/"/>
    
    
      <category term="hexo_Next" scheme="https://mr8god.cn/tags/hexo-Next/"/>
    
  </entry>
  
  <entry>
    <title>重构笔记</title>
    <link href="https://mr8god.cn/2020/04/11/%E9%87%8D%E6%9E%84%E7%AC%94%E8%AE%B0/"/>
    <id>https://mr8god.cn/2020/04/11/%E9%87%8D%E6%9E%84%E7%AC%94%E8%AE%B0/</id>
    <published>2020-04-11T07:49:15.000Z</published>
    <updated>2020-04-14T16:19:26.002Z</updated>
    
    <content type="html"><![CDATA[<h1 id="重构笔记"><a href="#重构笔记" class="headerlink" title="重构笔记"></a>重构笔记</h1><h2 id="重构前"><a href="#重构前" class="headerlink" title="重构前"></a>重构前</h2><h3 id="代码一（Customer）"><a href="#代码一（Customer）" class="headerlink" title="代码一（Customer）"></a>代码一（Customer）</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.mr8god.refactoring;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Enumeration;</span><br><span class="line"><span class="keyword">import</span> java.util.Vector;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr8god</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/4/12</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@time</span> 00:29</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Customer</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String _name;</span><br><span class="line">    <span class="keyword">private</span> Vector _rentals = <span class="keyword">new</span> Vector();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Customer</span><span class="params">(String name)</span></span>&#123;</span><br><span class="line">        _name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addRental</span><span class="params">(Rental arg)</span></span>&#123;</span><br><span class="line">        _rentals.addElement(arg);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> _name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">statement</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">double</span> totalAmount = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> frequentRenterPoints = <span class="number">0</span>;</span><br><span class="line">        Enumeration rentals = _rentals.elements();</span><br><span class="line">        String result = <span class="string">"Rental Record for "</span> + getName() + <span class="string">"\n"</span>;</span><br><span class="line">        <span class="keyword">while</span> (rentals.hasMoreElements())&#123;</span><br><span class="line">            <span class="keyword">double</span> thisAmount = <span class="number">0</span>;</span><br><span class="line">            Rental each = (Rental) rentals.nextElement();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">switch</span> (each.getMovie().getPriceCode())&#123;</span><br><span class="line">                <span class="keyword">case</span> Movie.REGULAR:</span><br><span class="line">                    thisAmount += <span class="number">2</span>;</span><br><span class="line">                    <span class="keyword">if</span> (each.getDaysRented() &gt; <span class="number">2</span>) &#123;</span><br><span class="line">                        thisAmount += (each.getDaysRented() -<span class="number">2</span>) * <span class="number">1.5</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">case</span> Movie.NEW_RELEASE:</span><br><span class="line">                    thisAmount += each.getDaysRented() * <span class="number">3</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> Movie.CHILDRENS:</span><br><span class="line">                    thisAmount += <span class="number">1.5</span>;</span><br><span class="line">                    <span class="keyword">if</span> (each.getDaysRented() &gt; <span class="number">3</span>) &#123;</span><br><span class="line">                        thisAmount += (each.getDaysRented() - <span class="number">3</span>) * <span class="number">1.5</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            frequentRenterPoints ++;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> ((each.getMovie().getPriceCode() == Movie.NEW_RELEASE) &amp;&amp; each.getDaysRented() &gt; <span class="number">1</span>) &#123;</span><br><span class="line">                frequentRenterPoints ++;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            result += <span class="string">"\t"</span> + each.getMovie().getTitle() + <span class="string">"\t"</span> + String.valueOf(thisAmount) + <span class="string">"\n"</span>;</span><br><span class="line">            totalAmount += thisAmount;</span><br><span class="line">        &#125;</span><br><span class="line">        result += <span class="string">"Amount owed is "</span> + String.valueOf(totalAmount) + <span class="string">"\n"</span>;</span><br><span class="line">        result += <span class="string">"You earned "</span> + String.valueOf(frequentRenterPoints) + <span class="string">" frequent renter points"</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="代码二（Rental）"><a href="#代码二（Rental）" class="headerlink" title="代码二（Rental）"></a>代码二（Rental）</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.mr8god.refactoring;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr8god</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/4/12</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@time</span> 00:14</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Rental</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Movie _movie;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> _daysRented;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Rental</span><span class="params">(Movie movie, <span class="keyword">int</span> daysRented)</span></span>&#123;</span><br><span class="line">        _movie = movie;</span><br><span class="line">        _daysRented = daysRented;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getDaysRented</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> _daysRented;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Movie <span class="title">getMovie</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> _movie;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="代码三（Movie）"><a href="#代码三（Movie）" class="headerlink" title="代码三（Movie）"></a>代码三（Movie）</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.mr8god.refactoring;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr8god</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/4/12</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@time</span> 00:01</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Movie</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> CHILDRENS = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> REGULAR = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> NEW_RELEASE = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String _title;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> _priceCode;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Movie</span><span class="params">(String title, <span class="keyword">int</span> priceCode)</span></span>&#123;</span><br><span class="line">        _title = title;</span><br><span class="line">        _priceCode = priceCode;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getPriceCode</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> _priceCode;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPriceCode</span><span class="params">(<span class="keyword">int</span> arg)</span></span>&#123;</span><br><span class="line">        _priceCode = arg;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getTitle</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> _title;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="第一次重构后"><a href="#第一次重构后" class="headerlink" title="第一次重构后"></a>第一次重构后</h2><h3 id="代码一（Customer）-1"><a href="#代码一（Customer）-1" class="headerlink" title="代码一（Customer）"></a>代码一（Customer）</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.mr8god.refactoring;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Enumeration;</span><br><span class="line"><span class="keyword">import</span> java.util.Vector;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr8god</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/4/12</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@time</span> 00:29</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Customer</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String _name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Vector _rentals = <span class="keyword">new</span> Vector();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Customer</span><span class="params">(String name)</span></span>&#123;</span><br><span class="line">        _name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addRental</span><span class="params">(Rental arg)</span></span>&#123;</span><br><span class="line">        _rentals.addElement(arg);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getName</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> _name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">statement</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Enumeration rentals = _rentals.elements();</span><br><span class="line">        String result = <span class="string">"Rental Record for "</span> + getName() + <span class="string">"\n"</span>;</span><br><span class="line">        <span class="keyword">while</span> (rentals.hasMoreElements())&#123;</span><br><span class="line">            Rental each = (Rental) rentals.nextElement();</span><br><span class="line"></span><br><span class="line">            result += <span class="string">"\t"</span> + each.getMovie().getTitle() + <span class="string">"\t"</span> + String.valueOf(each.getCharge()) + <span class="string">"\n"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        result += <span class="string">"Amount owed is "</span> + String.valueOf(getTotalCharge()) + <span class="string">"\n"</span>;</span><br><span class="line">        result += <span class="string">"You earned "</span> + String.valueOf(getTotalFrequentRenterPoints()) + <span class="string">" frequent renter points"</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">double</span> <span class="title">amountFor</span><span class="params">(Rental aRental)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> aRental.getCharge();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">getTotalCharge</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">double</span> result = <span class="number">0</span>;</span><br><span class="line">        Enumeration rentals = _rentals.elements();</span><br><span class="line">        <span class="keyword">while</span> (rentals.hasMoreElements())&#123;</span><br><span class="line">            Rental each = (Rental)rentals.nextElement();</span><br><span class="line">            result += each.getCharge();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">getTotalFrequentRenterPoints</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> result = <span class="number">0</span>;</span><br><span class="line">        Enumeration rentals = _rentals.elements();</span><br><span class="line">        <span class="keyword">while</span> (rentals.hasMoreElements())&#123;</span><br><span class="line">            Rental each = (Rental) rentals.nextElement();</span><br><span class="line">            result += each.getFrequentRenterPoints();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="代码二（Rental）-1"><a href="#代码二（Rental）-1" class="headerlink" title="代码二（Rental）"></a>代码二（Rental）</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.mr8god.refactoring;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr8god</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/4/12</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@time</span> 00:01</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Rental</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Movie _movie;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> _daysRented;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Rental</span><span class="params">(Movie movie, <span class="keyword">int</span> daysRented)</span></span>&#123;</span><br><span class="line">        _movie = movie;</span><br><span class="line">        _daysRented = daysRented;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getDaysRented</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> _daysRented;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Movie <span class="title">getMovie</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> _movie;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">double</span> <span class="title">getCharge</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">double</span> result = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">switch</span> (getMovie().getPriceCode()) &#123;</span><br><span class="line">            <span class="keyword">case</span> Movie.REGULAR:</span><br><span class="line">                result += <span class="number">2</span>;</span><br><span class="line">                <span class="keyword">if</span> (getDaysRented() &gt; <span class="number">2</span>) &#123;</span><br><span class="line">                    result += (getDaysRented() - <span class="number">2</span>) * <span class="number">1.5</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">case</span> Movie.NEW_RELEASE:</span><br><span class="line">                result += getDaysRented() * <span class="number">3</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> Movie.CHILDRENS:</span><br><span class="line">                result += <span class="number">1.5</span>;</span><br><span class="line">                <span class="keyword">if</span> (getDaysRented() &gt; <span class="number">3</span>) &#123;</span><br><span class="line">                    result += (getDaysRented() - <span class="number">3</span>) * <span class="number">1.5</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(<span class="string">"Unexpected value: "</span> + getMovie().getPriceCode());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getFrequentRenterPoints</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> ((getMovie().getPriceCode() == Movie.NEW_RELEASE) &amp;&amp; getDaysRented() &gt; <span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="代码三（Movie）-1"><a href="#代码三（Movie）-1" class="headerlink" title="代码三（Movie）"></a>代码三（Movie）</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.mr8god.refactoring;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr8god</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/4/12</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@time</span> 00:01</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Movie</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> CHILDRENS = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> REGULAR = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> NEW_RELEASE = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String _title;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> _priceCode;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Movie</span><span class="params">(String title, <span class="keyword">int</span> priceCode)</span></span>&#123;</span><br><span class="line">        _title = title;</span><br><span class="line">        _priceCode = priceCode;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getPriceCode</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> _priceCode;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPriceCode</span><span class="params">(<span class="keyword">int</span> arg)</span></span>&#123;</span><br><span class="line">        _priceCode = arg;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getTitle</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> _title;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="第一次重构心得"><a href="#第一次重构心得" class="headerlink" title="第一次重构心得"></a>第一次重构心得</h3><p>大多数重构都会减少代码量，但这次我们的重构却增加了代码量。</p><p>主要原因 这边使用的Java设置了大量语句来实现了一个累加循环。哪怕只是一个简单的累加循环，每个元素只需要一行代码，外围的支持代码也需要六行！虽然这是每个Java程序员都熟悉的写法，但是代码量还是太多了。</p><p>与其如此还不如不做这么多操作呢。再来说一下代码性能问题。原本代码只需要执行while循环一次就行了，经过我第一次重构后，代码居然要执行三次。进而代码的耗时可能就会很多，就可能大大降低了程序的性能。但是呢，这些本应不是我重构需要关心的问题，因为我其实本不知道我的代码经过一次重构后的性能会如何（害，说到这个我就想起了我的JProfiler，我现在还没能掌握它，难受），这需要专业的代码性能工具来进行测试。再说了，关于代码的性能，我们可以到后期进行性能优化时再考虑嘛。所以还没到最后呢！我们没有必要过早作出判决呀！</p><p>那么现在我们说一下优点哈。Now，Customer类内的所有代码都可以调用这些查询函数（就是我之前将临时变量浓缩成的那几个函数）。如果系统其它部分需要这部分信息，也可以轻松地将查询函数加入Customer类接口中。如果没有这些查询函数，其他函数就必须了解Rental类，并自行建立循环，这势必会增大程序的编写难度和维护难度。从而提高代码出错的概率。</p><p>好了好了，我们不能仅限于此哈，现在假设我们的产品经理又要跟我们提需求了，他们想让我们增加一个修改影片分类规则的功能。但是呢有没有具体告诉我们这究竟是一个怎样的分类规则。我们尚未清楚他们想怎么做，只知道新的分类法很快就要引入了。现有的分类法马上就要变了。与之相应的部分就是我们的计算方式和常客积分计算。我们现在必须要进入我们的计算方法和常客积分中，把因条件而异的代码替换掉，这样才能为将来的改变换上一层保护膜。我们开始新一轮的重构了！</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;重构笔记&quot;&gt;&lt;a href=&quot;#重构笔记&quot; class=&quot;headerlink&quot; title=&quot;重构笔记&quot;&gt;&lt;/a&gt;重构笔记&lt;/h1&gt;&lt;h2 id=&quot;重构前&quot;&gt;&lt;a href=&quot;#重构前&quot; class=&quot;headerlink&quot; title=&quot;重构前&quot;&gt;&lt;/a&gt;重构
      
    
    </summary>
    
    
    
      <category term="Java" scheme="https://mr8god.cn/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>从第一个Java代码我学习到了什么呢？</title>
    <link href="https://mr8god.cn/2020/04/10/Java/%E4%BB%8E%E7%AC%AC%E4%B8%80%E4%B8%AAJava%E4%BB%A3%E7%A0%81%E6%88%91%E5%AD%A6%E4%B9%A0%E5%88%B0%E4%BA%86%E4%BB%80%E4%B9%88%E5%91%A2%EF%BC%9F/"/>
    <id>https://mr8god.cn/2020/04/10/Java/%E4%BB%8E%E7%AC%AC%E4%B8%80%E4%B8%AAJava%E4%BB%A3%E7%A0%81%E6%88%91%E5%AD%A6%E4%B9%A0%E5%88%B0%E4%BA%86%E4%BB%80%E4%B9%88%E5%91%A2%EF%BC%9F/</id>
    <published>2020-04-10T07:49:15.000Z</published>
    <updated>2020-04-14T16:20:45.594Z</updated>
    
    <content type="html"><![CDATA[<h1 id="从第一个Java代码我学习到了什么呢？"><a href="#从第一个Java代码我学习到了什么呢？" class="headerlink" title="从第一个Java代码我学习到了什么呢？"></a>从第一个Java代码我学习到了什么呢？</h1><p>emmmmmm，我先上代码</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.mr8god.experiment1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.lang.System.out;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mr8god</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/4/816:09</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NumberIsPalindrome40</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">getNum</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> max = <span class="number">100000</span>;</span><br><span class="line">        <span class="keyword">int</span> min = <span class="number">1</span>;</span><br><span class="line">        Random random = <span class="keyword">new</span> Random();</span><br><span class="line">        <span class="keyword">return</span> random.nextInt(max)%(max - min + <span class="number">1</span>) + min;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isPalindrome</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(x &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> cur = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> num = x;</span><br><span class="line">        <span class="keyword">while</span>(num != <span class="number">0</span>) &#123;</span><br><span class="line">            cur = cur * <span class="number">10</span> + num % <span class="number">10</span>;</span><br><span class="line">            num /= <span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> cur == x;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> a = getNum();</span><br><span class="line">        out.println(a);</span><br><span class="line">        out.println(<span class="string">"是"</span> + ((a+<span class="string">""</span>).length()) + <span class="string">"位数"</span> );</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">new</span> NumberIsPalindrome40().isPalindrome(a))&#123;</span><br><span class="line">            out.println(<span class="string">"咱们随机生成的数字："</span> + a + <span class="string">"是一个回文数呢！"</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            out.println(<span class="string">"咱们随机生成的数字："</span> + a + <span class="string">"不是一个回文数哦！"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;从第一个Java代码我学习到了什么呢？&quot;&gt;&lt;a href=&quot;#从第一个Java代码我学习到了什么呢？&quot; class=&quot;headerlink&quot; title=&quot;从第一个Java代码我学习到了什么呢？&quot;&gt;&lt;/a&gt;从第一个Java代码我学习到了什么呢？&lt;/h1&gt;&lt;p&gt;em
      
    
    </summary>
    
    
      <category term="技术" scheme="https://mr8god.cn/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="Java" scheme="https://mr8god.cn/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>Java速记——变量详解</title>
    <link href="https://mr8god.cn/2020/04/09/Java/Java%E9%80%9F%E8%AE%B0%E2%80%94%E2%80%94%E5%8F%98%E9%87%8F%E8%AF%A6%E8%A7%A3/"/>
    <id>https://mr8god.cn/2020/04/09/Java/Java%E9%80%9F%E8%AE%B0%E2%80%94%E2%80%94%E5%8F%98%E9%87%8F%E8%AF%A6%E8%A7%A3/</id>
    <published>2020-04-09T07:49:15.000Z</published>
    <updated>2020-04-14T15:52:51.717Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Java速记——变量详解"><a href="#Java速记——变量详解" class="headerlink" title="Java速记——变量详解"></a>Java速记——变量详解</h1><p>Java没有全局变量的概念！！！</p><p>Java变量</p><ul><li>成员变量：<ul><li>位置：类中定义成员变量<ul><li>类变量 ： 有static</li><li>实例变量 ： 无static</li></ul></li></ul></li><li>局部变量<ul><li>位置：方法中定义局部变量<ul><li>形参</li><li>普通局部变量</li><li>代码块的局部变量</li></ul></li></ul></li></ul><p>判断变量：</p><ol><li>首先看位置</li><li>然后看修饰符</li></ol><h2 id="成员变量："><a href="#成员变量：" class="headerlink" title="成员变量："></a>成员变量：</h2><p>可以不需要显式指定初始值，系统可以自动分配初始值；</p><p>初始值规则与数组元素的初始值规则完全能相同。</p><p><strong>观点</strong>：程序中，类本身只有一个；程序一定先有类，再有对象（实例）！！！</p><h3 id="类变量："><a href="#类变量：" class="headerlink" title="类变量："></a>类变量：</h3><p>类变量属于类本身，当系统初始化类时，就会为类分别分配空间，并执行初始化。</p><h3 id="实例变量："><a href="#实例变量：" class="headerlink" title="实例变量："></a>实例变量：</h3><p>类变量属于对象本身，系统每次创建对象时，都需要为该对象的实例变量分配空间，并执行初始化。</p><ul><li>严格来说：类变量，应该由类本身进行访问。<pre><code>                实例变量，应该由对象进行访问。</code></pre>Java的一种不知道有啥用的语法（或许可以出题？）：允许通过对象类访问类变量</li></ul><p>比如说static int test这种设立类变量的方法，但是我们在实际访问的时候，举个情景例子哈</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ComputerTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        Computer c1 = <span class="keyword">new</span> Computer();</span><br><span class="line">        </span><br><span class="line">        Computer c2 = <span class="keyword">new</span> Computer();</span><br><span class="line">       </span><br><span class="line">        System.out.println(c1.test);</span><br><span class="line">        System.out.println(c2.test);<span class="comment">// Java允许通过对象类访问类变量</span></span><br><span class="line">        c2.test = <span class="number">20</span>;</span><br><span class="line">        System.out.println(c2.test);</span><br><span class="line">        System.out.println(c1.test);</span><br><span class="line"><span class="comment">//        System.out.println(test);</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这边看起来c1，c2看起来是很不错，引用的是咱们的test类变量，其实Java中根本就没有这个玩意儿。这玩意儿开辟出来就是在堆内存中占了个位置，然后谁用它，它就变成谁，说实话目前我还没有找到正确使用这个东西的姿势，over。这边看起来用的c1，c2，其实全是Computer类引用的，效果和下面的代码一样！！！</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ComputerTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        Computer c1 = <span class="keyword">new</span> Computer();</span><br><span class="line"></span><br><span class="line">        Computer c2 = <span class="keyword">new</span> Computer();</span><br><span class="line"></span><br><span class="line">        System.out.println(Computer.test);</span><br><span class="line">        System.out.println(Computer.test);<span class="comment">// Java允许通过对象类访问类变量</span></span><br><span class="line">        c2.test = <span class="number">20</span>;</span><br><span class="line">        System.out.println(Computer.test);</span><br><span class="line">        System.out.println(Computer.test);</span><br><span class="line"><span class="comment">//        System.out.println(test);</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>所以我建议</strong>：暂时我们就使用类调用类变量、类方法。</p><p>如果考试的时候，遇到用对象调用类变量、类方法的情况，第一步先把对象换成类。</p><h2 id="局部变量："><a href="#局部变量：" class="headerlink" title="局部变量："></a>局部变量：</h2><p>必须由程序员显式指定初始值，然后才能使用——否则编译报错；</p><p>局部变量的作用域很小，只在方法里有效；</p><p>离开了方法，局部变量就会失效</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Java速记——变量详解&quot;&gt;&lt;a href=&quot;#Java速记——变量详解&quot; class=&quot;headerlink&quot; title=&quot;Java速记——变量详解&quot;&gt;&lt;/a&gt;Java速记——变量详解&lt;/h1&gt;&lt;p&gt;Java没有全局变量的概念！！！&lt;/p&gt;
&lt;p&gt;Java变量
      
    
    </summary>
    
    
      <category term="技术" scheme="https://mr8god.cn/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="Java" scheme="https://mr8god.cn/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>Java速记——数组</title>
    <link href="https://mr8god.cn/2020/04/09/Java/Java%E9%80%9F%E8%AE%B0%E2%80%94%E2%80%94%E6%95%B0%E7%BB%84/"/>
    <id>https://mr8god.cn/2020/04/09/Java/Java%E9%80%9F%E8%AE%B0%E2%80%94%E2%80%94%E6%95%B0%E7%BB%84/</id>
    <published>2020-04-09T07:49:15.000Z</published>
    <updated>2020-04-14T16:04:34.318Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Java——数组"><a href="#Java——数组" class="headerlink" title="Java——数组"></a>Java——数组</h1><p>数组：可以一次定义，就可以得到多个类型相同、功能相似的变量，本质还是变量</p><h2 id="数组类型"><a href="#数组类型" class="headerlink" title="数组类型"></a>数组类型</h2><p>java类型可以分成基本类型、应用类型</p><ol><li>基本类型：8个<ol><li>引用类型：数组、类、接口、枚举</li></ol></li></ol><p><strong>数组其实就是一种引用类型。</strong></p><p>任何已有的类型，添加一组方括号就可以变成数组类型</p><p>int ：属于基本类型</p><p>int[]：属于引用类型</p><p>int[]（是一个整体，得连在一起写，一定要注意哈！）</p><p>long         -&gt; long[]</p><p>String       -&gt; String[]</p><p>double     -&gt; double[]</p><p>int []         -&gt; int $[][]$</p><p>数组元素的类型：是数组类型去掉一组方括号</p><p> 比如说int[]数组元素的类型，就是int</p><h3 id="创建数组对象（数组初始化）"><a href="#创建数组对象（数组初始化）" class="headerlink" title="创建数组对象（数组初始化）"></a>创建数组对象（数组初始化）</h3><ol><li><p>静态初始化</p><p>new 类型[] {元素1, 元素2,  ……}<br>不指定长度，只指定每个元素。<br><del>静态初始化的简化语法，省略掉in[]，但是这种方法只能在定义数组变量初始值的时候进行使用</del>，只能在定义数组变量，并赋初始值时使用。</p></li><li><p>动态初始化<br>new 类型[] {元素1, 元素2,  ……}<br>只指定长度，不指定每个元素。<br>系统会自动为每个元素分配初始值，其分配规则是：</p><ul><li>所有数组元素为数值类型时，数组元素的初始值为0；</li><li>所有数组元素为boolean类型时，数组元素的初始值为false</li><li>所有数组元素为引用类型时，数组元素的初始值为null</li></ul></li></ol><h3 id="使用数组"><a href="#使用数组" class="headerlink" title="使用数组"></a>使用数组</h3><ol><li><p>数组都有一个length属性，该属性返回数组的长度</p><p>数组一旦创建，其长度是固定的，他在内存中位置也是固定的。</p></li><li><p>每个数组元素，就相当于一个变量。数组元素的类型，就是数组类型去掉一组方括号<br>访问数组元素：<br>数组元素[索引] ——索引从0开始。最后一个元素的索引是length-1<br>使用的元素超出数组长度，就会导致ArrayIndexOutOfBoundsException: 4（数组索引越界异常）</p></li><li><p>遍历数组 - 依次使用每个元素</p></li><li><p>使用for each循环遍历数组<br>for(元素类型 变量名：数组名){</p><p>​        // 可通过变量名访问每个元素、</p><p>}<br>数组有几个元素，该循环就执行几次，变量会自动、依次等于每个元素。<br>foreach遍历只能访问数组元素的值，不能修改数组元素的值。<br><strong>建议</strong>：永远不要在foreach循环中修改计数器的值！</p></li></ol><h3 id=""><a href="#" class="headerlink" title=" "></a> </h3><h3 id="深入理解数组"><a href="#深入理解数组" class="headerlink" title="深入理解数组"></a>深入理解数组</h3><p>数组是一种引用类型，<strong>引用类型和基本类型的区别在哪里？</strong></p><p>java程序的内存可以分成两种：</p><h4 id="堆-heap-内存："><a href="#堆-heap-内存：" class="headerlink" title="-堆(heap)内存："></a>-堆(heap)内存：</h4><p>java虚拟机启动时分配的一块永久的、很大的内存区。堆内存只有一块。</p><p><strong>java程序必须要使用虚拟机才能运行！</strong>。内存区我们是看不到的。java-Xms可以设置初始java堆大小。比如手 java -Xmx256 内存只有245兆。很容易就会爆内存。 </p><p>Error occurred during initialization of VM<br>Too small initial heap</p><p>上面两行就是爆内存的报错</p><h4 id="栈-stack-内存："><a href="#栈-stack-内存：" class="headerlink" title="-栈(stack)内存："></a>-栈(stack)内存：</h4><p>每次方法运行分配一块临时、很小的内存区。</p><p>每个方法都有自己相应的栈区，方法结束时，对应的栈区就会被回收。</p><p>几个方法就有几个栈区</p><h4 id="在方法中定义的、局部变量（不管是什么类型），都会放入相应的方法栈中去。"><a href="#在方法中定义的、局部变量（不管是什么类型），都会放入相应的方法栈中去。" class="headerlink" title="-在方法中定义的、局部变量（不管是什么类型），都会放入相应的方法栈中去。"></a>-在方法中定义的、局部变量（不管是什么类型），都会放入相应的方法栈中去。</h4><h4 id="new出来的东西，都在堆内存"><a href="#new出来的东西，都在堆内存" class="headerlink" title="-new出来的东西，都在堆内存"></a>-new出来的东西，都在堆内存</h4><p>堆内存中的对象，如果没有引用变量指向它，那它就变成了trash，等待vm的垃圾回收机制回收它。</p><p>计算机的每个内存单元（Byte、字节)在操作系统中都有一个编号，就像是一栋大楼的每个房间号</p><p>【变量赋值的区别：】</p><p>-基本类型的赋值：直接将该值存入变量所在内存</p><p>-引用类型的赋值：将该对象所在第一个内存单元的编号（内存地址）存入变量。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Java——数组&quot;&gt;&lt;a href=&quot;#Java——数组&quot; class=&quot;headerlink&quot; title=&quot;Java——数组&quot;&gt;&lt;/a&gt;Java——数组&lt;/h1&gt;&lt;p&gt;数组：可以一次定义，就可以得到多个类型相同、功能相似的变量，本质还是变量&lt;/p&gt;
&lt;h2 i
      
    
    </summary>
    
    
      <category term="技术" scheme="https://mr8god.cn/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="Java" scheme="https://mr8god.cn/tags/Java/"/>
    
  </entry>
  
</feed>
